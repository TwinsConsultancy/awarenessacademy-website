<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Command Center - AWARENESS ACADEMY</title>
    <link rel="stylesheet" href="../css/variables.css?v=6">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --sidebar-width: 80px;
            --sidebar-expanded: 280px;

            /* Saffron & Gold Theme Gradients */
            --primary-gradient: linear-gradient(135deg, var(--color-saffron) 0%, var(--color-golden) 100%);
            --secondary-gradient: linear-gradient(135deg, var(--color-golden) 0%, #F59E0B 100%);
            --glass-sidebar: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.4);

            /* Status Colors */
            --success-gradient: linear-gradient(135deg, #10B981 0%, #34D399 100%);
            --warning-gradient: linear-gradient(135deg, #F59E0B 0%, #FBBF24 100%);
            --danger-gradient: linear-gradient(135deg, #EF4444 0%, #F87171 100%);

            /* Layout */
            --card-backdrop: rgba(255, 255, 255, 0.6);
            --card-border: rgba(255, 255, 255, 0.3);
            --sidebar-bg: var(--glass-sidebar);
            --content-bg: #FFF9F0;
            /* Warm White from variables.css */

            --text-primary: #1A1A1A;
            --text-secondary: #4A4A4A;

            --shadow-card: 0 10px 25px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-elevation: 0 25px 50px -12px rgba(255, 153, 51, 0.15);
            --border-radius: 20px;
            --transition-smooth: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            display: flex;
            background: var(--content-bg);
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            margin: 0;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
            width: 100%;
            background: var(--content-bg);
        }

        /* Modern Sidebar Design */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--sidebar-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            transition: var(--transition-smooth);
            z-index: 1000;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow: visible;
            box-shadow: var(--shadow-card);
        }

        .sidebar:hover {
            width: var(--sidebar-expanded);
            padding-left: 20px;
            box-shadow: var(--shadow-elevation);
        }

        /* Enhanced Brand Section */
        .brand {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            height: 50px;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            flex-shrink: 0;
            /* Prevent shrinking */
        }

        .sidebar:hover .brand,
        .sidebar.active .brand {
            justify-content: flex-start;
        }

        .brand::before {
            content: "âœ¨";
            font-size: 2rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .brand-text {
            font-family: var(--font-heading);
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.2rem;
            font-weight: 700;
            margin-left: 10px;
            opacity: 0;
            transform: translateX(-10px);
            transition: var(--transition-smooth);
        }

        .sidebar:hover .brand-text,
        .sidebar.active .brand-text {
            display: inline-block;
            opacity: 1;
            transform: translateX(0);
        }

        /* Removed duplicate brand-text block */

        /* Enhanced Navigation Menu */
        .nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 4px;
            /* Reduced gap */
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            min-height: 0;
            scrollbar-width: thin;
            scrollbar-color: rgba(245, 158, 11, 0.3) transparent;
        }

        /* Custom Scrollbar for Nav Menu */
        .nav-menu::-webkit-scrollbar {
            width: 4px;
        }

        .nav-menu::-webkit-scrollbar-track {
            background: transparent;
        }

        .nav-menu::-webkit-scrollbar-thumb {
            background-color: rgba(245, 158, 11, 0.3);
            border-radius: 20px;
        }

        .sidebar:hover .nav-menu::-webkit-scrollbar-thumb {
            background-color: rgba(245, 158, 11, 0.6);
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            /* Reduced padding */
            text-decoration: none;
            color: var(--text-secondary);
            border-radius: 12px;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            justify-content: center;
            min-height: 44px;
            /* Reduced height */
        }

        .sidebar:hover .nav-link,
        .sidebar.active .nav-link {
            justify-content: flex-start;
            padding-left: 16px;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            opacity: 0;
            transition: var(--transition-smooth);
            border-radius: 12px;
        }

        .nav-link:hover::before,
        .nav-link.active::before {
            opacity: 0.1;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--color-saffron-dark);
            background: rgba(255, 153, 51, 0.1);
            /* Saffron tint */
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 153, 51, 0.1);
        }

        .nav-link i {
            font-size: 1.1rem;
            /* Smaller icon */
            width: 24px;
            text-align: center;
            z-index: 2;
            position: relative;
        }

        .link-text {
            display: none;
            /* Hide text by default */
            margin-left: 12px;
            /* Reduced margin */
            font-weight: 500;
            font-size: 0.9rem;
            /* Smaller text */
            opacity: 0;
            transform: translateX(-10px);
            transition: var(--transition-smooth);
            z-index: 2;
            position: relative;
            white-space: nowrap;
        }

        .sidebar:hover .link-text,
        .sidebar.active .link-text {
            display: inline-block;
            /* Show on hover or active */
            opacity: 1;
            transform: translateX(0);
        }

        /* Modern Top Header */
        .top-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 40px;
            /* Reduced vertical padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            flex-shrink: 0;
            width: 100%;
            height: 60px;
            /* Explicit compact height */
        }

        .notification-icon {
            position: relative;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 1.2rem;
            /* Slightly smaller icon */
            padding: 6px;
            /* Reduced padding */
            border-radius: 12px;
            transition: var(--transition-smooth);
        }

        .notification-icon:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            transform: translateY(-2px);
        }

        .notification-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            background: var(--secondary-gradient);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.65rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            /* Reduced gap */
            cursor: pointer;
            padding: 6px 12px;
            /* Reduced padding */
            border-radius: 12px;
            /* Adjusted radius */
            transition: var(--transition-smooth);
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: var(--shadow-card);
        }

        .user-avatar {
            width: 32px;
            /* Smaller avatar */
            height: 32px;
            /* Smaller avatar */
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            /* Smaller font */
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            /* Slightly smaller text */
        }

        /* Enhanced Main Content */
        .main-content {
            flex: 1;
            background: transparent;
            overflow: hidden;
            /* Hide overflow on main container */
            min-width: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            /* Full viewport height */
        }

        .scrollable-wrapper {
            flex: 1;
            overflow-y: auto;
            /* Scroll only this area */
            padding: 0;
            scroll-behavior: smooth;
        }

        .header-section {
            padding: 30px 40px 10px 40px;
            background: transparent;
            flex-shrink: 0;
        }

        .header-section h1 {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0 0 10px 0;
            font-family: var(--font-heading);
        }

        .header-section p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 0;
            font-weight: 400;
        }

        /* Modern Stats Cards */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .stat-card {
            padding: 28px;
            border-radius: var(--border-radius);
            background: var(--card-backdrop);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-card);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--primary-gradient);
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-elevation);
        }

        .stat-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .stat-icon.users {
            background: var(--primary-gradient);
        }

        .stat-icon.courses {
            background: var(--success-gradient);
        }

        .stat-icon.revenue {
            background: var(--warning-gradient);
        }

        .stat-icon.support {
            background: var(--secondary-gradient);
        }

        .stat-info h3 {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 0;
            color: var(--text-primary);
        }

        .stat-info p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin: 4px 0 0 0;
            font-weight: 500;
        }

        /* Modern Tab Design */
        .tabs {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            padding: 6px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
        }

        .tab-btn {
            background: transparent;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: var(--transition-smooth);
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .tab-btn.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 153, 51, 0.3);
            transform: translateY(-2px);
        }

        .tab-btn:not(.active):hover {
            background: rgba(255, 153, 51, 0.1);
            color: var(--color-saffron-dark);
        }

        /* Enhanced Table Design */
        .floating-table-container {
            overflow-x: auto;
            border-radius: var(--border-radius);
            background: var(--card-backdrop);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-card);
        }

        .floating-table {
            width: 100%;
            border-collapse: collapse;
        }

        .floating-table thead th {
            background: rgba(102, 126, 234, 0.1);
            color: var(--text-primary);
            font-weight: 600;
            padding: 20px;
            text-align: left;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 2px solid rgba(102, 126, 234, 0.2);
        }

        .floating-table tbody tr {
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition-smooth);
        }

        .floating-table tbody tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .floating-table td {
            padding: 18px 20px;
            color: var(--text-primary);
            font-size: 0.95rem;
            vertical-align: middle;
        }

        /* Modern Badge Styles */
        .badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .badge-active {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
        }

        .badge-inactive {
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            color: white;
        }

        /* Status Pills */
        .status-pill {
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .status-new {
            background: rgba(59, 130, 246, 0.1);
            color: #1d4ed8;
        }

        .status-read {
            background: rgba(107, 114, 128, 0.1);
            color: #374151;
        }

        .status-replied {
            background: rgba(16, 185, 129, 0.1);
            color: #047857;
        }

        .status-archived {
            background: rgba(245, 158, 11, 0.1);
            color: #92400e;
        }

        /* Responsive Design Enhancements */
        @media (max-width: 1024px) {
            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }

            .header-section {
                padding: 20px 24px;
            }

            .scrollable-content {
                padding: 0 24px 24px 24px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                transform: translateX(-100%);
            }

            .sidebar:hover {
                width: 100%;
                /* Full screen menu on mobile */
                transform: translateX(0);
                background: rgba(255, 255, 255, 0.98);
                z-index: 9999;
            }

            .stats-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .tabs {
                flex-direction: column;
                gap: 4px;
            }

            .header-section h1 {
                font-size: 2rem;
            }

            .top-header {
                padding: 12px 20px;
            }
        }

        /* Loading Animation */
        @keyframes shimmer {
            0% {
                background-position: -200px 0;
            }

            100% {
                background-position: calc(200px + 100%) 0;
            }
        }

        .loading-shimmer {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            background-size: 200px 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Glassmorphism Utilities */
        .glass-ultra {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        }



        /* Modern Scrollable Content */
        .scrollable-content {
            flex: 1;
            overflow: hidden;
            padding: 0 40px 40px 40px;
            display: flex;
            flex-direction: column;
        }

        .dashboard-content-section {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 15px;
            min-height: 0;
        }

        /* Professional Scrollbar */
        .dashboard-content-section::-webkit-scrollbar {
            width: 6px;
        }

        .dashboard-content-section::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .dashboard-content-section::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
            transition: var(--transition-smooth);
        }

        .dashboard-content-section::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-gradient);
        }

        /* Enhanced Settings Layout */
        .settings-layout {
            display: flex;
            gap: 32px;
            align-items: flex-start;
        }

        .settings-sidebar {
            width: 280px;
            flex-shrink: 0;
            background: var(--card-backdrop);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-card);
            position: sticky;
            top: 20px;
        }

        .settings-nav-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            margin-bottom: 8px;
            border-radius: 12px;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .settings-nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            opacity: 0;
            transition: var(--transition-smooth);
        }

        .settings-nav-item:hover::before {
            opacity: 0.1;
        }

        .settings-nav-item:hover {
            color: #667eea;
            transform: translateX(8px);
        }

        .settings-nav-item.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            transform: translateX(8px);
        }

        .settings-nav-item.active::before {
            opacity: 0;
        }

        .settings-content-panel {
            flex: 1;
            display: none;
            animation: slideInUp 0.4s ease;
        }

        .settings-content-panel.active {
            display: block;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Enhanced Toggle Switch */
        .toggle-switch-premium {
            position: relative;
            width: 56px;
            height: 32px;
        }

        .toggle-switch-premium input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider-premium {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(203, 213, 224, 0.8);
            transition: var(--transition-smooth);
            border-radius: 32px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .toggle-slider-premium:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 2px;
            background: white;
            transition: var(--transition-smooth);
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        input:checked+.toggle-slider-premium {
            background: var(--primary-gradient);
        }

        input:checked+.toggle-slider-premium:before {
            transform: translateX(24px);
        }

        /* Enhanced Floating Action Button */
        .floating-add-btn {
            position: fixed;
            bottom: 32px;
            z-index: 10000;
            background: var(--success-gradient);
            color: white;
            border: none;
            width: 56px;
            height: 56px;
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            overflow: hidden;
            white-space: nowrap;
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
            font-weight: 600;
        }

        #addUserFab,
        #addCourseFab {
            left: 100px;
        }

        body:has(.sidebar:hover) .floating-add-btn {
            left: 300px;
        }

        .floating-add-btn:hover {
            width: 220px;
            border-radius: 32px;
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(79, 172, 254, 0.6);
        }

        .floating-add-btn i {
            font-size: 1.4rem;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            transition: var(--transition-smooth);
        }

        .floating-add-btn:hover i {
            left: 20px;
            transform: translateY(-50%);
        }

        .floating-add-btn span {
            opacity: 0;
            transition: opacity 0.3s 0.1s;
            font-weight: 600;
            font-size: 1rem;
            margin-left: 50px;
        }

        .floating-add-btn:hover span {
            opacity: 1;
        }

        /* Enhanced Modal Styles */
        .modal {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: var(--card-backdrop);
            backdrop-filter: blur(30px);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-elevation);
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .close-modal-x {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-smooth);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal-x:hover {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        /* Enhanced Button Styles */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            font-family: inherit;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        }

        .btn-danger {
            background: var(--danger-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(250, 112, 154, 0.3);
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(250, 112, 154, 0.4);
        }

        /* Enhanced Form Inputs */
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid rgba(203, 213, 224, 0.6);
            border-radius: 12px;
            font-size: 0.95rem;
            font-family: inherit;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            transition: var(--transition-smooth);
            color: var(--text-primary);
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: rgba(255, 255, 255, 0.9);
        }

        /* Enhanced Data Table */
        .data-table {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
            background: var(--card-backdrop);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        .data-table thead th {
            background: var(--primary-gradient);
            color: white;
            padding: 18px 20px;
            font-weight: 600;
            text-align: left;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
            z-index: 5;
        }

        .data-table tbody tr {
            transition: var(--transition-smooth);
            cursor: pointer;
        }

        .data-table tbody tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.3);
        }

        .data-table tbody tr:nth-child(odd) {
            background: rgba(255, 255, 255, 0.5);
        }

        .data-table tbody tr:hover {
            background: rgba(255, 153, 51, 0.05);
            /* Saffron tint */
            transform: scale(1.01);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .data-table td {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Enhanced Switch */
        .switch {
            position: relative;
            display: inline-block;
            width: 64px;
            height: 34px;
            flex-shrink: 0;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(203, 213, 224, 0.8);
            transition: var(--transition-smooth);
            border-radius: 34px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: var(--transition-smooth);
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        input:checked+.slider {
            background: var(--success-gradient);
        }

        input:checked+.slider:before {
            transform: translateX(30px);
        }

        /* Special Section Visibility */
        body:has(#usersSection.active-flex) .header-section,
        body:has(#coursesSection.active-flex) .header-section {
            display: none;
        }

        #usersSection,
        #coursesSection {
            display: none;
        }

        #usersSection.active-flex,
        #coursesSection.active-flex {
            display: flex !important;
            flex-direction: column;
            overflow: hidden;
            height: 100%;
        }

        .user-header-compact {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .user-header-compact h1 {
            margin: 0;
            font-size: 2rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-header-compact p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Toast Animations */
        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }

            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        /* Messages Section Specific Styles */
        .priority-badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .status-badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #f3f4f6;
        }

        .data-table tbody tr {
            transition: background 0.2s;
            cursor: pointer;
        }

        .data-table tbody tr:hover {
            background: #f9fafb;
        }

        /* Modal Animation */
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Gallery Drag & Drop */
        .gallery-card.dragging {
            opacity: 0.5;
            cursor: grabbing !important;
        }

        .drag-handle:active {
            cursor: grabbing !important;
        }

        /* Analytics Section Styling */
        /* Analytics Category Tabs */
        .analytics-tabs-container {
            margin-bottom: 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }

        /* Analytics Categories (Vertical Layout) */
        .analytics-category {
            display: block;
            margin-bottom: 40px;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analytics-category-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 153, 51, 0.2);
        }

        .analytics-category-header h3 {
            margin: 0;
            font-size: 1.4rem;
            color: var(--color-saffron);
            font-weight: 600;
        }

        .analytics-category-header .category-icon {
            font-size: 1.8rem;
            color: var(--color-golden);
        }

        .analytics-grid {
            display: grid;
            gap: 20px;
        }

        .analytics-grid.grid-5 {
            grid-template-columns: repeat(5, 1fr);
        }

        .analytics-grid.grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        .analytics-grid.grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .analytics-grid.grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .analytics-grid.grid-1 {
            grid-template-columns: 1fr;
        }

        .analytics-grid.grid-2-1 {
            grid-template-columns: 2fr 1fr;
        }

        .analytics-grid.grid-1-2 {
            grid-template-columns: 1fr 2fr;
        }

        .chart-card {
            background: var(--glass-sidebar);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-card);
            transition: var(--transition-smooth);
        }

        .chart-card:hover {
            box-shadow: 0 12px 48px rgba(255, 153, 51, 0.15);
            transform: translateY(-5px);
            border-color: rgba(255, 153, 51, 0.3);
        }

        .chart-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .chart-card-header h4 {
            margin: 0;
            font-size: 1rem;
            color: #333;
            font-weight: 600;
        }

        .chart-card-header i {
            color: var(--color-saffron);
            font-size: 1.2rem;
        }

        /* Uniform Analytics Grid */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        /* Specific overrides can remain if needed, but we default to uniform */
        .analytics-grid.grid-2-1 {
            display: grid;
        }

        /* Fallback to auto-fit unless strictly needed, but let's keep simple */

        /* Enforce uniformity on cards */
        .chart-card {
            background: var(--glass-sidebar);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            /* Stylish rounded corners */
            padding: 20px;
            /* Compact padding */
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-card);
            transition: var(--transition-smooth);
            height: 380px;
            /* Fixed height for uniformity */
            display: flex;
            flex-direction: column;
            overflow: hidden;
            /* Prevent overflow */
        }

        .chart-card:hover {
            box-shadow: 0 12px 48px rgba(255, 153, 51, 0.15);
            transform: translateY(-5px);
            border-color: rgba(255, 153, 51, 0.3);
        }

        .chart-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            /* Compact margin */
            flex-shrink: 0;
        }

        .chart-card-header h4 {
            margin: 0;
            font-size: 0.95rem;
            /* Compact font */
            color: #333;
            font-weight: 600;
        }

        .chart-card-header i {
            color: var(--color-saffron);
            font-size: 1.1rem;
        }

        /* KPI Card Override - Small and compact */
        .chart-card.kpi-card {
            text-align: center;
            padding: 15px;
            justify-content: center;
            height: 160px;
            /* Much smaller than charts */
            min-height: auto;
        }

        .kpi-card .kpi-icon {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .kpi-card .kpi-value {
            font-size: 1.6rem;
            font-weight: 700;
            margin: 4px 0;
        }

        .kpi-card .kpi-label {
            font-size: 0.85rem;
            color: #666;
            margin: 0;
        }

        .chart-canvas-wrapper {
            position: relative;
            flex: 1;
            /* Take remaining space */
            width: 100%;
            min-height: 0;
            /* Important for flex child overflow */
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .analytics-grid {
                grid-template-columns: 1fr;
                /* Single column on mobile */
            }

            .chart-card {
                height: 350px;
                /* Slightly smaller on mobile if needed */
            }
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 15px;
            left: 20px;
            z-index: 10001;
            /* Above sidebar z-index */
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                position: fixed;
                /* Fix sidebar on mobile */
                top: 0;
                left: 0;
                height: 100vh;
                transform: translateX(-100%);
                width: 280px;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
                /* Enhanced shadow */
            }

            .sidebar.active {
                transform: translateX(0);
            }

            /* Adjust main content for mobile toggler */
            .header-section {
                padding: 60px 20px 10px 20px;
                /* More top padding for toggler */
            }

            .header-section h1 {
                font-size: 2rem;
                /* Smaller heading */
            }

            .dashboard-container {
                display: block;
                /* Stack layout if needed, but flex usually works. Let's keep flex but rely on sidebar fixed */
            }

            /* Overlay for mobile sidebar */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(5px);
                z-index: 999;
            }

            .sidebar-overlay.active {
                display: block;
            }
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Mobile Toggle & Overlay -->
        <button class="mobile-menu-toggle" onclick="toggleMobileSidebar()">
            <i class="fas fa-bars"></i>
        </button>
        <div class="sidebar-overlay" onclick="toggleMobileSidebar()"></div>
        <aside class="sidebar" id="sidebar">
            <div class="brand">
                <span class="brand-text">AWARENESS ACADEMY</span>
            </div>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="switchSection('overview')" title="Overview">
                        <i class="fas fa-home"></i> <span class="link-text">Overview</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('analytics')" title="Analytics">
                        <i class="fas fa-chart-pie"></i> <span class="link-text">Analytics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('users')" title="User Management">
                        <i class="fas fa-users"></i> <span class="link-text">Users</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('courses')" title="Course Management">
                        <i class="fas fa-book"></i> <span class="link-text">Courses</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('finance')" title="Financial Ledger">
                        <i class="fas fa-coins"></i> <span class="link-text">Finance</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('tickets')" title="Support Tickets">
                        <i class="fas fa-ticket-alt"></i> <span class="link-text">Tickets</span>
                        <span id="ticketBadge" class="notification-badge"
                            style="display: none; margin-left: 8px; background: var(--color-error); color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.7rem;"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('messages')" title="Contact Messages">
                        <i class="fas fa-envelope"></i> <span class="link-text">Messages</span>
                        <span id="messagesBadge" class="notification-badge"
                            style="display: none; margin-left: 8px; background: var(--color-saffron); color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.7rem;"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('subscribers')" title="Course Subscribers">
                        <i class="fas fa-bell"></i> <span class="link-text">Subscribers</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('gallery')" title="Gallery Management">
                        <i class="fas fa-images"></i> <span class="link-text">Gallery</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="switchSection('settings')" title="System Settings">
                        <i class="fas fa-cogs"></i> <span class="link-text">Settings</span>
                    </a>
                </li>

            </ul>

            <a href="#" id="logoutBtn" class="nav-link" style="color: var(--color-error); margin-top: auto;"
                title="Logout">
                <i class="fas fa-sign-out-alt"></i> <span class="link-text">Logout</span>
            </a>
        </aside>

        <main class="main-content">
            <!-- Top Header Bar -->
            <div class="top-header">
                <div class="top-header-brand" style="opacity: 0; pointer-events: none;">
                    <!-- Hidden brand on header for desktop -->
                    <i class="fas fa-bolt"></i>
                    <span>AWARENESS ACADEMY</span>
                </div>
                <div class="top-header-right">
                    <div class="user-profile">
                        <div class="user-avatar" id="adminAvatar">A</div>
                        <span class="user-name" id="adminName">Admin</span>
                    </div>
                </div>
            </div>

            <!-- Scrollable Content Area -->
            <div class="scrollable-wrapper">
                <div class="header-section">
                    <header
                        style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h1 id="pageTitle">Overview</h1>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <!-- Refresh button removed -->
                        </div>
                    </header>
                </div>

                <div class="scrollable-content">
                    <!-- OVERVIEW SECTION -->
                    <section id="overviewSection" class="dashboard-content-section">
                        <!-- Admin Status Diagnostic Panel -->
                        <div id="adminStatusDiagnostic"
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; display: none;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <i class="fas fa-user-shield" style="font-size: 2rem;"></i>
                                    <div>
                                        <div style="font-size: 0.85rem; opacity: 0.9;">Admin Privilege Status</div>
                                        <div id="diagnosticStatus" style="font-size: 1.2rem; font-weight: 600;">
                                            Checking...
                                        </div>
                                        <div id="diagnosticDetails"
                                            style="font-size: 0.75rem; opacity: 0.8; margin-top: 3px;"></div>
                                    </div>
                                </div>
                                <button onclick="refreshAdminStatus()" class="btn-primary"
                                    style="background: white; color: #667eea; border: none; padding: 8px 16px; font-size: 0.85rem;">
                                    <i class="fas fa-sync-alt"></i> Refresh Status
                                </button>
                            </div>
                        </div>

                        <div class="stats-row" id="adminStats">
                            <div class="stat-card">
                                <div class="stat-icon users"><i class="fas fa-users"></i></div>
                                <div class="stat-info">
                                    <h3 id="statUsers">-</h3>
                                    <p>Total Seekers</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon courses"><i class="fas fa-user-tie"></i></div>
                                <div class="stat-info">
                                    <h3 id="statMentors">-</h3>
                                    <p>Mentors</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon revenue"><i class="fas fa-book-open"></i></div>
                                <div class="stat-info">
                                    <h3 id="statCourses">-</h3>
                                    <p>Courses</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon support"><i class="fas fa-dollar-sign"></i></div>
                                <div class="stat-info">
                                    <h3 id="statRevenue">$0</h3>
                                    <p>Revenue</p>
                                </div>
                            </div>
                        </div>

                        <h3><i class="fas fa-tasks" style="color: var(--color-saffron);"></i> Pending Approvals <span
                                id="pendingCountBadge"
                                style="background: var(--color-golden); color: white; font-size: 0.8rem; padding: 4px 10px; border-radius: 12px; margin-left: 10px; display: none;">0</span>
                        </h3>
                        <div id="pendingQueueOverview" style="margin-top: 20px;">
                            <p style="text-align: center; color: #999; padding: 20px;">
                                <i class="fas fa-spinner fa-spin" style="margin-right: 8px;"></i>Loading approval
                                queue...
                            </p>
                        </div>
                    </section>

                    <!-- ANALYTICS SECTION -->
                    <section id="analyticsSection" class="dashboard-content-section" style="display: none;">

                        <!-- Analytics Tabs Removed for Single Vertical View -->
                        <div style="margin-bottom: 30px; text-align: center; color: var(--text-secondary);">
                            <p><i class="fas fa-chart-pie"></i> Comprehensive Analytics Report</p>
                        </div>

                        <!-- CATEGORY 1: USER & GROWTH ANALYTICS -->
                        <!-- CATEGORY 1: USER & GROWTH ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-users category-icon"></i>
                                <h3>User & Growth Analytics</h3>
                            </div>

                            <!-- Combined Grid for Users -->
                            <div class="analytics-grid">
                                <!-- KPI Cards -->
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: #3498db;">
                                        <i class="fas fa-user-graduate"></i>
                                    </div>
                                    <div class="kpi-value" style="color: #3498db;" id="kpiStudents">0</div>
                                    <p class="kpi-label">Total Students</p>
                                </div>
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: #9b59b6;">
                                        <i class="fas fa-user-tie"></i>
                                    </div>
                                    <div class="kpi-value" style="color: #9b59b6;" id="kpiStaff">0</div>
                                    <p class="kpi-label">Staff Members</p>
                                </div>
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: #e67e22;">
                                        <i class="fas fa-user-shield"></i>
                                    </div>
                                    <div class="kpi-value" style="color: #e67e22;" id="kpiAdmins">0</div>
                                    <p class="kpi-label">Administrators</p>
                                </div>
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: #2ecc71;">
                                        <i class="fas fa-user-check"></i>
                                    </div>
                                    <div class="kpi-value" style="color: #2ecc71;" id="kpiActive">0</div>
                                    <p class="kpi-label">Active Accounts</p>
                                </div>
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: #e74c3c;">
                                        <i class="fas fa-user-times"></i>
                                    </div>
                                    <div class="kpi-value" style="color: #e74c3c;" id="kpiInactive">0</div>
                                    <p class="kpi-label">Disabled Accounts</p>
                                </div>

                                <!-- Charts -->
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-chart-line"></i>
                                        <h4>Student Growth Trend (Last 30 Days)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="studentGrowthChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-user-check"></i>
                                        <h4>Account Status (Active/Inactive)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="activeInactiveChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-clock"></i>
                                        <h4>Login Activity (Last 7 Days)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="recentlyActiveChart"></canvas>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- CATEGORY 2: COURSE PERFORMANCE ANALYTICS -->
                        <!-- CATEGORY 2: COURSE PERFORMANCE ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-book-open category-icon"></i>
                                <h3>Course Performance Analytics</h3>
                            </div>

                            <div class="analytics-grid">
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-chart-bar"></i>
                                        <h4>Course Enrollment Distribution</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="courseEnrollmentChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-tasks"></i>
                                        <h4>Course Completion Rate</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="courseCompletionChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-balance-scale"></i>
                                        <h4>Paid vs Free Courses</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper" style="max-width: 300px; margin: 0 auto;">
                                        <canvas id="paidFreeChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY 3: REVENUE & PAYMENT ANALYTICS -->
                        <!-- CATEGORY 3: REVENUE & PAYMENT ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-rupee-sign category-icon"></i>
                                <h3>Revenue & Payment Analytics</h3>
                            </div>

                            <div class="analytics-grid">
                                <!-- Total Revenue KPI -->
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: var(--color-golden);">
                                        <i class="fas fa-coins"></i>
                                    </div>
                                    <div class="kpi-value" style="color: var(--color-golden); font-size: 3rem;"
                                        id="totalRevenueKPI">â‚¹0</div>
                                    <p class="kpi-label">Total Revenue Generated</p>
                                </div>

                                <div class="chart-card" style="grid-column: span 2;">
                                    <div class="chart-card-header">
                                        <i class="fas fa-chart-area"></i>
                                        <h4>Monthly Revenue Trend</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="revenueGrowthChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-check-circle"></i>
                                        <h4>Payment Success vs Failure</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="paymentStatusChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card" style="grid-column: span 2;">
                                    <div class="chart-card-header">
                                        <i class="fas fa-trophy"></i>
                                        <h4>Revenue by Course (Top 10 Performers)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="revenueByCourseChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY 4: CONTENT & STAFF ANALYTICS -->
                        <!-- CATEGORY 4: CONTENT & STAFF ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-file-alt category-icon"></i>
                                <h3>Content & Staff Analytics</h3>
                            </div>

                            <div class="analytics-grid">
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-upload"></i>
                                        <h4>Content Upload Status</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="contentStatusChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-users-cog"></i>
                                        <h4>Staff Content Contributions</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="staffContributionChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-video"></i>
                                        <h4>Live Classes Conducted by Staff</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="liveClassStaffChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY 5: LIVE CLASS & ATTENDANCE ANALYTICS -->
                        <!-- CATEGORY 5: LIVE CLASS & ATTENDANCE ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-chalkboard-teacher category-icon"></i>
                                <h3>Live Class & Attendance Analytics</h3>
                            </div>

                            <div class="analytics-grid">
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-user-check"></i>
                                        <h4>Attendance Rate Trend (Last 30 Days)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="attendanceRateChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY 6: STUDENT ENGAGEMENT ANALYTICS -->
                        <!-- CATEGORY 6: STUDENT ENGAGEMENT ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-heartbeat category-icon"></i>
                                <h3>Student Engagement Analytics</h3>
                            </div>

                            <div class="analytics-grid">
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-play-circle"></i>
                                        <h4>Video Completion Distribution</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="videoCompletionChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card kpi-card">
                                    <div class="kpi-icon" style="color: var(--color-golden);">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="kpi-value" style="color: var(--color-golden);" id="avgEngagementKPI">0%
                                    </div>
                                    <p class="kpi-label">Average Engagement Rate</p>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY 7: SUPPORT & FEEDBACK ANALYTICS -->
                        <!-- CATEGORY 7: SUPPORT & FEEDBACK ANALYTICS -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-life-ring category-icon"></i>
                                <h3>Support & Feedback Analytics</h3>
                            </div>

                            <div class="analytics-grid">
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-ticket-alt"></i>
                                        <h4>Support Requests Trend (Last 30 Days)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="supportRequestsChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-clipboard-check"></i>
                                        <h4>Ticket Status Distribution</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="ticketStatusChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY 8: SYSTEM HEALTH & SECURITY -->
                        <!-- CATEGORY 8: SYSTEM HEALTH & SECURITY -->
                        <div class="analytics-category">
                            <div class="analytics-category-header">
                                <i class="fas fa-server category-icon"></i>
                                <h3>System Health & Security</h3>
                            </div>

                            <div class="analytics-grid">
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-sign-in-alt"></i>
                                        <h4>Login Activity Trend (Last 30 Days)</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="loginActivityChart"></canvas>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-header">
                                        <i class="fas fa-users"></i>
                                        <h4>User Role Distribution</h4>
                                    </div>
                                    <div class="chart-canvas-wrapper">
                                        <canvas id="roleDistributionChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </section>

                    <!-- USERS SECTION -->
                    <section id="usersSection" class="dashboard-content-section" style="display: none;">
                        <!-- Compact Header with Tabs on the Side -->
                        <div class="user-header-compact">
                            <div>
                                <h1>User Management</h1>
                                <p>System Command Center</p>
                            </div>
                            <div class="tabs">
                                <button class="tab-btn active" onclick="switchUserTab('Student')">Students</button>
                                <button class="tab-btn" onclick="switchUserTab('Staff')">Staff</button>
                                <button class="tab-btn" onclick="switchUserTab('Admin')">Admins</button>
                            </div>
                        </div>

                        <!-- Search & Filter Controls -->
                        <div class="glass-card"
                            style="padding: 15px; margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                            <div style="flex: 1; position: relative;">
                                <i class="fas fa-search"
                                    style="position: absolute; left: 10px; top: 10px; color: #999;"></i>
                                <input type="text" id="userSearchInput" class="form-control"
                                    placeholder="Search by Name, Email, or ID..."
                                    style="padding-left: 35px; width: 100%; box-sizing: border-box;"
                                    onkeyup="debounceLoadUsers()">
                            </div>
                            <div style="width: 200px;">
                                <select id="userStatusFilter" class="form-control"
                                    onchange="loadUserManagement(currentUserRoleView)">
                                    <option value="">All Status</option>
                                    <option value="active">Active Only</option>
                                    <option value="inactive">Inactive Only</option>
                                </select>
                            </div>
                        </div>

                        <div id="userListContainer" style="flex: 1; overflow-y: auto;">
                            <!-- User Table loads here -->
                        </div>

                        <!-- User Management FAB -->
                        <button id="addUserFab" class="floating-add-btn" onclick="openAddUserModal()">
                            <i class="fas fa-plus"></i> <span>Add New User</span>
                        </button>
                    </section>

                    <!-- COURSES SECTION -->
                    <section id="coursesSection" class="dashboard-content-section" style="display: none;">
                        <!-- Header with Tabs (Tabs Removed) -->
                        <div class="user-header-compact"
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-shrink: 0;">
                            <div>
                                <h1>Course Management</h1>
                                <p>Curriculum & Content</p>
                            </div>
                        </div>

                        <!-- Manage Section (Main Content) -->
                        <div id="courseManageSub" class="sub-section"
                            style="display: flex; flex-direction: column; flex: 1; overflow: hidden;">

                            <!-- Search & Filter Controls (Static) -->
                            <div class="glass-card"
                                style="padding: 15px; margin-bottom: 20px; display: flex; gap: 15px; align-items: center; flex-shrink: 0;">
                                <div style="flex: 1; position: relative;">
                                    <i class="fas fa-search"
                                        style="position: absolute; left: 10px; top: 10px; color: #999;"></i>
                                    <input type="text" id="courseSearchInput" class="form-control"
                                        placeholder="Search by Title or Category..."
                                        style="padding-left: 35px; width: 100%; box-sizing: border-box;"
                                        onkeyup="debounceLoadCourses()">
                                </div>
                                <div style="width: 200px;">
                                    <select id="courseStatusFilter" class="form-control" onchange="loadCourses()">
                                        <option value="">All Status</option>
                                        <option value="Draft">Draft</option>
                                        <option value="Approved">Approved</option>
                                        <option value="Published">Published</option>
                                        <option value="Inactive">Inactive</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Scrollable List -->
                            <div id="courseListContainer" style="flex: 1; overflow-y: auto;">
                                <!-- Table loads here -->
                            </div>

                            <!-- FAB -->
                            <button id="addCourseFab" class="floating-add-btn" onclick="openCourseModal()">
                                <i class="fas fa-plus"></i> <span>Add New Course</span>
                            </button>
                        </div>
                    </section>

                    <!-- CONTENT SECTION -->
                    <section id="contentSection" class="dashboard-content-section" style="display: none;">
                        <div class="tabs" style="margin-bottom: 20px; border-bottom: 1px solid #ddd;">
                            <button class="tab-btn active" onclick="showContentSubSection('banners')">Banners</button>
                            <button class="tab-btn" onclick="showContentSubSection('blogs')">Blogs</button>
                            <button class="tab-btn" onclick="showContentSubSection('events')">Events</button>
                        </div>

                        <div id="contentBannersSub" class="sub-section">
                            <div class="glass-card" style="padding: 20px; margin-bottom: 20px;">
                                <form id="bannerForm">
                                    <div style="display: flex; gap: 10px;">
                                        <input type="text" name="title" class="form-control" placeholder="Title"
                                            required>
                                        <input type="text" name="link" class="form-control" placeholder="Link">
                                        <input type="file" name="file" class="form-control" required>
                                        <button type="submit" class="btn-primary">Add Banner</button>
                                    </div>
                                </form>
                            </div>
                            <div id="bannerList"></div>
                        </div>

                        <div id="contentBlogsSub" class="sub-section" style="display: none;">
                            <div class="glass-card" style="padding: 30px; max-width: 800px;">
                                <form id="blogForm">
                                    <h3>Publish Blog</h3>
                                    <div class="form-group">
                                        <label>Title</label>
                                        <input type="text" name="title" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Content</label>
                                        <textarea name="content" class="form-control" rows="5" required></textarea>
                                    </div>
                                    <button type="submit" class="btn-primary">Publish</button>
                                </form>
                            </div>
                        </div>

                        <div id="contentEventsSub" class="sub-section" style="display: none;">
                            <div class="glass-card" style="padding: 30px; max-width: 800px;">
                                <form id="eventForm">
                                    <h3>Create Event</h3>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                        <div class="form-group"><label>Title</label><input type="text" name="title"
                                                class="form-control" required></div>
                                        <div class="form-group"><label>Date</label><input type="date" name="date"
                                                class="form-control" required></div>
                                    </div>
                                    <button type="submit" class="btn-primary">Create Event</button>
                                </form>
                            </div>
                        </div>
                    </section>

                    <!-- FINANCE SECTION -->
                    <section id="financeSection" class="dashboard-content-section" style="display: none;">
                        <div class="glass-card" style="padding: 0; overflow: hidden;">
                            <div style="max-height: 600px; overflow-y: auto;">
                                <table style="width: 100%; border-collapse: collapse; text-align: left;">
                                    <thead style="background: rgba(0,0,0,0.02); position: sticky; top: 0;">
                                        <tr>
                                            <th style="padding: 15px;">Transaction</th>
                                            <th style="padding: 15px;">Seeker</th>
                                            <th style="padding: 15px;">Path</th>
                                            <th style="padding: 15px;">Amount</th>
                                            <th style="padding: 15px;">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ledgerList"></tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <!-- TICKETS SECTION -->
                    <section id="ticketsSection" class="dashboard-content-section" style="display: none;">
                        <div class="glass-card" style="padding: 15px; margin-bottom: 12px;">
                            <div
                                style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 10px; align-items: center;">
                                <div style="margin: 0;">
                                    <input type="text" id="ticketSearchInput" class="form-control"
                                        placeholder="Search by ID, subject, or user..." oninput="debounceLoadTickets()"
                                        style="height: 40px; font-size: 0.9rem; padding: 8px 12px; line-height: 1.5;">
                                </div>
                                <div style="margin: 0;">
                                    <select id="ticketStatusFilter" class="form-control" onchange="loadTickets()"
                                        style="height: 40px; font-size: 0.9rem; padding: 8px 12px; line-height: 1.5;">
                                        <option value="">All Statuses</option>
                                        <option value="Open">Open</option>
                                        <option value="In Progress">In Progress</option>
                                        <option value="Resolved">Resolved</option>
                                        <option value="Closed">Closed</option>
                                    </select>
                                </div>
                                <div style="margin: 0;">
                                    <select id="ticketPriorityFilter" class="form-control" onchange="loadTickets()"
                                        style="height: 40px; font-size: 0.9rem; padding: 8px 12px; line-height: 1.5;">
                                        <option value="">All Priorities</option>
                                        <option value="Low">Low</option>
                                        <option value="Medium">Medium</option>
                                        <option value="High">High</option>
                                        <option value="Urgent">Urgent</option>
                                    </select>
                                </div>
                                <button class="btn-primary" onclick="loadTickets()"
                                    style="height: 40px; padding: 0 20px; font-size: 0.9rem;">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>

                        <div class="glass-card" style="padding: 0; overflow: hidden; height: calc(100% - 80px);">
                            <div id="ticketsListContainer" style="overflow-y: auto; height: 100%; padding: 0;">
                                <p style="text-align: center; color: #999; padding: 40px;">Loading tickets...</p>
                            </div>
                        </div>
                    </section>
                    <div id="messagesSection" class="dashboard-content-section" style="display: none;">
                        <div class="content-header" style="margin-bottom: 40px;">
                            <h2
                                style="font-size: 2rem; background: linear-gradient(to right, #333, #666); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                                Messages</h2>
                            <p style="color: #666; font-size: 1.1rem;">Manage inquiries and support requests
                                efficiently.
                            </p>
                        </div>

                        <!-- Glass Toolbar -->
                        <div class="glass-ultra"
                            style="padding: 15px 25px; border-radius: 15px; margin-bottom: 30px; display: flex; flex-wrap: wrap; gap: 20px; align-items: center; justify-content: space-between;">
                            <!-- Search -->
                            <div style="flex: 1; min-width: 300px; position: relative;">
                                <i class="fas fa-search"
                                    style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                <input type="text" id="messageSearch" placeholder="Search messages..."
                                    class="form-control" style="padding-left: 45px; width: 100%;">
                            </div>

                            <!-- Filters -->
                            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <select id="messageStatusFilter" class="form-control" style="width: auto;">
                                    <option value="">All Status</option>
                                    <option value="New">New</option>
                                    <option value="Read">Read</option>
                                    <option value="Replied">Replied</option>
                                </select>
                                <select id="messagePriorityFilter" class="form-control" style="width: auto;">
                                    <option value="">Priority</option>
                                    <option value="Urgent">Urgent</option>
                                    <option value="High">High</option>
                                </select>
                                <select id="messageSortFilter" class="form-control" style="width: auto;">
                                    <option value="-createdAt">Newest First</option>
                                    <option value="createdAt">Oldest First</option>
                                </select>
                                <button class="btn-primary" onclick="loadMessages()"
                                    style="border-radius: 50%; padding: 0; width: 42px; height: 42px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Stats Overview (Compact) -->
                        <div
                            style="display: flex; gap: 20px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 10px;">
                            <div class="glass-ultra"
                                style="padding: 15px 25px; border-radius: 12px; display: flex; align-items: center; gap: 15px; min-width: 180px;">
                                <div
                                    style="width: 45px; height: 45px; border-radius: 10px; background: #e0f2fe; color: #0284c7; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-inbox"></i>
                                </div>
                                <div>
                                    <h3 id="newMessagesCount" style="margin: 0; font-size: 1.5rem;">0</h3>
                                    <small style="color: #6b7280;">New Messages</small>
                                </div>
                            </div>
                            <div class="glass-ultra"
                                style="padding: 15px 25px; border-radius: 12px; display: flex; align-items: center; gap: 15px; min-width: 180px;">
                                <div
                                    style="width: 45px; height: 45px; border-radius: 10px; background: #dcfce7; color: #16a34a; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-check-double"></i>
                                </div>
                                <div>
                                    <h3 id="readMessagesCount" style="margin: 0; font-size: 1.5rem;">0</h3>
                                    <small style="color: #6b7280;">Read</small>
                                </div>
                            </div>
                            <div class="glass-ultra"
                                style="padding: 15px 25px; border-radius: 12px; display: flex; align-items: center; gap: 15px; min-width: 180px;">
                                <div
                                    style="width: 45px; height: 45px; border-radius: 10px; background: #ffedd5; color: #ea580c; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-reply"></i>
                                </div>
                                <div>
                                    <h3 id="repliedMessagesCount" style="margin: 0; font-size: 1.5rem;">0</h3>
                                    <small style="color: #6b7280;">Replied</small>
                                </div>
                            </div>
                            <div class="glass-ultra"
                                style="padding: 15px 25px; border-radius: 12px; display: flex; align-items: center; gap: 15px; min-width: 180px;">
                                <div
                                    style="width: 45px; height: 45px; border-radius: 10px; background: #f3f4f6; color: #4b5563; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                                    <i class="fas fa-list"></i>
                                </div>
                                <div>
                                    <h3 id="totalMessagesCount" style="margin: 0; font-size: 1.5rem;">0</h3>
                                    <small style="color: #6b7280;">Total</small>
                                </div>
                            </div>
                        </div>

                        <!-- Floating Rows Table -->
                        <div class="floating-table-container">
                            <table class="floating-table" id="messagesTable">
                                <thead>
                                    <tr>
                                        <th style="width: 150px;">Status</th>
                                        <th>Sender</th>
                                        <th>Subject</th>
                                        <th style="width: 150px;">Date</th>
                                        <th style="width: 100px; text-align: right;">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="messagesTableBody">
                                    <!-- Loaded via JS -->
                                    <tr>
                                        <td colspan="5" style="text-align: center; padding: 40px; color: #9ca3af;">
                                            <i class="fas fa-circle-notch fa-spin"></i> Loading...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div id="messagesPagination"
                            style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center; padding: 0 10px;">
                            <span id="messagesInfo" style="color: #6b7280; font-size: 0.9rem;"></span>
                            <div id="messagesPaginationButtons" style="display: flex; gap: 10px;"></div>
                        </div>
                    </div>

                    <!-- SETTINGS SECTION (Redesigned) -->
                    <!-- Subscribers Section -->
                    <div id="subscribersSection" class="dashboard-content-section" style="display: none;">
                        <div class="content-header" style="margin-bottom: 30px;">
                            <p style="color: #666; font-size: 1.1rem;">Manage users who want to be notified about
                                upcoming
                                courses.</p>
                        </div>

                        <!-- Stats Cards -->
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                            <div class="glass-ultra" style="padding: 20px; border-radius: 16px; text-align: center;">
                                <div style="font-size: 2.5rem; color: var(--color-primary); margin-bottom: 10px;">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--color-primary);"
                                    id="totalSubscribersCount">0</div>
                                <div style="color: #666; font-size: 0.9rem; margin-top: 5px;">Total Subscribers</div>
                            </div>
                            <div class="glass-ultra" style="padding: 20px; border-radius: 16px; text-align: center;">
                                <div style="font-size: 2.5rem; color: #F59E0B; margin-bottom: 10px;">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;"
                                    id="pendingSubscribersCount">0</div>
                                <div style="color: #666; font-size: 0.9rem; margin-top: 5px;">Pending Notifications
                                </div>
                            </div>
                            <div class="glass-ultra" style="padding: 20px; border-radius: 16px; text-align: center;">
                                <div style="font-size: 2.5rem; color: var(--color-success); margin-bottom: 10px;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--color-success);"
                                    id="notifiedSubscribersCount">0</div>
                                <div style="color: #666; font-size: 0.9rem; margin-top: 5px;">Already Notified</div>
                            </div>
                        </div>

                        <!-- Subscribers Table -->
                        <div class="glass-ultra" style="padding: 30px; border-radius: 20px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                                <h3 style="margin: 0; font-size: 1.3rem; color: #333;">All Subscribers</h3>
                                <div style="display: flex; gap: 10px;">
                                    <select id="subscriberFilterStatus" onchange="loadSubscribers()"
                                        class="form-control"
                                        style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: white;">
                                        <option value="">All Status</option>
                                        <option value="pending">Pending</option>
                                        <option value="notified">Notified</option>
                                    </select>
                                </div>
                            </div>

                            <div style="overflow-x: auto;">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Phone</th>
                                            <th>Course</th>
                                            <th>Status</th>
                                            <th>Subscribed On</th>
                                            <th>Notified On</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="subscribersTableBody">
                                        <tr>
                                            <td colspan="8" style="text-align: center; padding: 40px; color: #999;">
                                                <i class="fas fa-spinner fa-spin"
                                                    style="font-size: 2rem; margin-bottom: 10px;"></i>
                                                <div>Loading subscribers...</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- GALLERY SECTION -->
                    <div id="gallerySection" class="dashboard-content-section" style="display: none;">
                        <!-- Header with Search, Filter, and Upload Button -->
                        <div class="glass-ultra"
                            style="padding: 20px 30px; border-radius: 20px; margin-bottom: 30px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                            <!-- Search -->
                            <div style="flex: 1; min-width: 250px; position: relative;">
                                <i class="fas fa-search"
                                    style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                <input type="text" id="gallerySearchInput" class="form-control"
                                    placeholder="Search by description..."
                                    style="padding: 12px 15px 12px 45px; border-radius: 10px; width: 100%;"
                                    onkeyup="searchGalleryImages()" />
                            </div>

                            <!-- Filter -->
                            <div style="min-width: 180px;">
                                <select id="galleryFilterSelect" class="form-control"
                                    style="padding: 12px 15px; border-radius: 10px;" onchange="filterGalleryImages()">
                                    <option value="all">All Images</option>
                                    <option value="recent">Recently Added</option>
                                    <option value="popular">Most Liked</option>
                                </select>
                            </div>

                            <!-- Upload Button -->
                            <button class="btn-primary" onclick="openGalleryUploadModal()"
                                style="padding: 12px 25px; border-radius: 50px; display: flex; align-items: center; gap: 8px; white-space: nowrap;">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>Upload Image</span>
                            </button>
                        </div>

                        <!-- Gallery Grid -->
                        <div class="glass-ultra" style="padding: 30px; border-radius: 20px;">
                            <!-- Drag Info Banner -->
                            <div id="galleryDragInfo"
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; display: none; align-items: center; justify-content: space-between;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <i class="fas fa-arrows-alt" style="font-size: 1.3rem;"></i>
                                    <span style="font-weight: 500;">Drag and drop images to reorder them</span>
                                </div>
                                <button onclick="saveGalleryOrder()" class="btn-primary"
                                    style="background: white; color: #667eea; border: none; padding: 10px 20px; font-weight: 600; border-radius: 8px; cursor: pointer;">
                                    <i class="fas fa-save"></i> Save Order
                                </button>
                            </div>

                            <div id="galleryImagesGrid"
                                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px;">
                                <!-- Images will be loaded dynamically -->
                            </div>

                            <div id="galleryEmptyState" style="text-align: center; padding: 60px 20px; display: none;">
                                <i class="fas fa-images" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                                <p style="color: #666; font-size: 1.1rem;">No images in gallery yet. Click "Upload
                                    Image" to
                                    add your first image!</p>
                            </div>

                            <div id="galleryLoadingState" style="text-align: center; padding: 60px 20px;">
                                <i class="fas fa-spinner fa-spin"
                                    style="font-size: 3rem; color: var(--color-golden);"></i>
                                <p style="color: #666; margin-top: 15px;">Loading gallery...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Gallery Upload Modal -->
                    <div id="galleryUploadModal" class="modal"
                        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; align-items: center; justify-content: center;">
                        <div class="glass-card"
                            style="background: white; border-radius: 20px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative; animation: slideUp 0.3s ease;">
                            <!-- Close Button -->
                            <button onclick="closeGalleryUploadModal()"
                                style="position: absolute; top: 20px; right: 25px; background: none; border: none; font-size: 1.8rem; cursor: pointer; color: #999; z-index: 10; transition: color 0.3s;"
                                onmouseover="this.style.color='#333'" onmouseout="this.style.color='#999'">
                                &times;
                            </button>

                            <!-- Modal Header -->
                            <div style="padding: 30px 30px 20px; border-bottom: 2px solid #f0f0f0;">
                                <h3
                                    style="margin: 0; color: #333; font-size: 1.6rem; display: flex; align-items: center; gap: 12px;">
                                    <i class="fas fa-cloud-upload-alt" style="color: var(--color-golden);"></i>
                                    Upload Gallery Image
                                </h3>
                            </div>

                            <!-- Modal Body -->
                            <div style="padding: 30px;">
                                <form id="galleryUploadForm">
                                    <!-- Drag & Drop Zone -->
                                    <div id="galleryDropZone"
                                        style="border: 3px dashed rgba(199, 151, 47, 0.3); border-radius: 15px; padding: 50px 20px; text-align: center; cursor: pointer; transition: all 0.3s; background: rgba(199, 151, 47, 0.05); margin-bottom: 25px;">
                                        <i class="fas fa-image"
                                            style="font-size: 3rem; color: var(--color-golden); margin-bottom: 15px; display: block;"></i>
                                        <p
                                            style="font-size: 1.1rem; color: #333; margin-bottom: 10px; font-weight: 500;">
                                            Drag & Drop your image here</p>
                                        <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">or</p>
                                        <button type="button"
                                            onclick="document.getElementById('galleryImageInput').click()"
                                            class="btn-secondary" style="padding: 10px 25px; border-radius: 8px;">
                                            <i class="fas fa-folder-open"></i> Browse Files
                                        </button>
                                        <p style="font-size: 0.85rem; color: #999; margin-top: 15px;">Supported: JPEG,
                                            JPG,
                                            PNG | Size: 10KB - 500KB</p>
                                        <input type="file" id="galleryImageInput"
                                            accept="image/jpeg,image/jpg,image/png" style="display: none;" />
                                    </div>

                                    <!-- Image Preview -->
                                    <div id="galleryImagePreview"
                                        style="display: none; position: relative; margin-bottom: 25px;">
                                        <div
                                            style="position: relative; border-radius: 15px; overflow: hidden; background: #f5f5f5;">
                                            <img id="galleryPreviewImg" src="" alt="Preview"
                                                style="max-width: 100%; max-height: 350px; display: block; margin: 0 auto; object-fit: contain;" />
                                            <button type="button" onclick="removeGalleryPreview()"
                                                style="position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 1.3rem; display: flex; align-items: center; justify-content: center; transition: background 0.3s;"
                                                onmouseover="this.style.background='rgba(231,76,60,0.9)'"
                                                onmouseout="this.style.background='rgba(0,0,0,0.7)'">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                        <div id="galleryFileSizeInfo"
                                            style="text-align: center; margin-top: 12px; font-size: 0.9rem; color: #666; font-weight: 500;">
                                        </div>
                                    </div>

                                    <!-- Description Input -->
                                    <div class="form-group" style="margin-bottom: 25px;">
                                        <label
                                            style="display: block; margin-bottom: 10px; font-weight: 600; color: #333; font-size: 0.95rem;">
                                            Description <span style="color: #e74c3c;">*</span>
                                        </label>
                                        <input type="text" id="galleryDescription" class="form-control"
                                            placeholder="Enter a brief description (10-100 characters)..."
                                            minlength="10" maxlength="100" required
                                            style="padding: 14px; border-radius: 10px; width: 100%; border: 2px solid #e0e0e0; font-size: 0.95rem;" />
                                        <div
                                            style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                            <small id="galleryCharCount" style="color: #666; font-size: 0.85rem;">0 /
                                                100
                                                characters</small>
                                            <small style="color: #999; font-size: 0.85rem;">Minimum 10
                                                characters</small>
                                        </div>
                                    </div>

                                    <!-- Action Buttons -->
                                    <div style="display: flex; gap: 12px; justify-content: flex-end;">
                                        <button type="button" onclick="closeGalleryUploadModal()" class="btn-secondary"
                                            style="padding: 12px 25px; border-radius: 10px;">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn-primary" id="galleryUploadBtn"
                                            style="padding: 12px 30px; border-radius: 10px;" disabled>
                                            <i class="fas fa-upload"></i> Upload Image
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div id="settingsSection" class="dashboard-content-section" style="display: none;">
                        <div class="settings-layout">
                            <!-- Sidebar Navigation -->
                            <div class="settings-sidebar">
                                <div class="settings-nav-item active" onclick="switchSettingsTab(this, 's-gen')">
                                    <i class="fas fa-sliders-h"></i> General
                                </div>
                                <div class="settings-nav-item" onclick="switchSettingsTab(this, 's-sec')">
                                    <i class="fas fa-shield-alt"></i> Security
                                </div>
                                <div class="settings-nav-item" onclick="switchSettingsTab(this, 's-prof')">
                                    <i class="fas fa-user-circle"></i> Profile
                                </div>
                            </div>

                            <!-- Content Panels -->
                            <div style="flex: 1;">

                                <!-- General Settings -->
                                <div id="s-gen" class="settings-content-panel active">
                                    <div class="glass-ultra" style="padding: 30px; border-radius: 20px;">
                                        <h3 style="margin-bottom: 25px; font-size: 1.4rem;">General Configuration</h3>

                                        <div
                                            style="display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                            <div>
                                                <h4 style="margin: 0 0 5px 0;">Maintenance Mode</h4>
                                                <p style="margin: 0; color: #6b7280; font-size: 0.9rem;">Suspend public
                                                    access to the
                                                    site.</p>
                                            </div>
                                            <label class="toggle-switch-premium">
                                                <input type="checkbox" id="maintenanceToggle"
                                                    onchange="toggleSetting('isMaintenanceMode', this.checked)">
                                                <span class="toggle-slider-premium"></span>
                                            </label>
                                        </div>

                                        <div
                                            style="display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                            <div>
                                                <h4 style="margin: 0 0 5px 0;">Disable Right Click</h4>
                                                <p style="margin: 0; color: #6b7280; font-size: 0.9rem;">Prevent content
                                                    copying on
                                                    public pages.</p>
                                            </div>
                                            <label class="toggle-switch-premium">
                                                <input type="checkbox" id="rightClickToggle"
                                                    onchange="toggleSetting('disableRightClick', this.checked)">
                                                <span class="toggle-slider-premium"></span>
                                            </label>
                                        </div>

                                        <div
                                            style="margin-top: 25px; padding-bottom: 25px; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                            <div class="form-group" style="margin-bottom: 20px;">
                                                <label
                                                    style="display: block; font-weight: 600; margin-bottom: 10px;">Site
                                                    Title</label>
                                                <input type="text" id="siteTitleInput" class="form-control"
                                                    placeholder="AWARENESS ACADEMY"
                                                    style="padding: 12px 15px; border-radius: 10px;">
                                            </div>
                                            <div class="form-group" style="margin-bottom: 20px;">
                                                <label
                                                    style="display: block; font-weight: 600; margin-bottom: 10px;">Support
                                                    Email</label>
                                                <div style="display: flex; gap: 15px;">
                                                    <input type="email" id="supportEmailInput" class="form-control"
                                                        placeholder="support@awarenessacademy.com"
                                                        style="flex: 1; padding: 12px 15px; border-radius: 10px;">
                                                    <button class="btn-primary"
                                                        onclick="updatePlatformInfo()">Save</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div style="margin-top: 25px;">
                                            <label
                                                style="display: block; font-weight: 600; margin-bottom: 10px;">Maintenance
                                                Message</label>
                                            <div style="display: flex; gap: 15px;">
                                                <input type="text" id="maintenanceMessageInput" class="form-control"
                                                    placeholder="We are currently performing maintenance..."
                                                    style="flex: 1; padding: 12px 15px; border-radius: 10px;">
                                                <button class="btn-primary"
                                                    onclick="updateMaintenanceMessage()">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Security Settings -->
                                <div id="s-sec" class="settings-content-panel">
                                    <div class="glass-ultra" style="padding: 30px; border-radius: 20px;">
                                        <h3 style="margin-bottom: 25px; font-size: 1.4rem;">Security & Password</h3>
                                        <form id="adminPasswordForm">
                                            <div class="form-group" style="margin-bottom: 20px;">
                                                <label style="margin-bottom: 8px; display: block;">Current
                                                    Password</label>
                                                <input type="password" class="form-control"
                                                    style="padding: 12px; border-radius: 10px;">
                                            </div>
                                            <div class="form-group" style="margin-bottom: 20px;">
                                                <label style="margin-bottom: 8px; display: block;">New Password</label>
                                                <input type="password" class="form-control"
                                                    style="padding: 12px; border-radius: 10px;">
                                            </div>
                                            <div class="form-group" style="margin-bottom: 25px;">
                                                <label style="margin-bottom: 8px; display: block;">Confirm New
                                                    Password</label>
                                                <input type="password" class="form-control"
                                                    style="padding: 12px; border-radius: 10px;">
                                            </div>
                                            <div style="text-align: right;">
                                                <button type="submit" class="btn-primary"
                                                    style="padding: 12px 30px;">Update
                                                    Password</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <!-- Profile Settings -->
                                <div id="s-prof" class="settings-content-panel">
                                    <div class="glass-ultra" style="padding: 30px; border-radius: 20px;">
                                        <div
                                            style="display: flex; gap: 25px; align-items: center; margin-bottom: 30px;">
                                            <div
                                                style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, #eee, #ddd); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: #aaa; box-shadow: 0 10px 20px rgba(0,0,0,0.1);">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div>
                                                <h3 style="margin: 0; font-size: 1.6rem;">Admin Account</h3>
                                                <p style="margin: 5px 0 0 0; color: #666;">admin@awarenessacademy.com
                                                </p>
                                            </div>
                                        </div>

                                        <form id="adminProfileForm">
                                            <div class="form-group" style="margin-bottom: 20px;">
                                                <label style="margin-bottom: 8px; display: block;">Display Name</label>
                                                <input type="text" id="profileDisplayName" class="form-control"
                                                    value="Admin User" style="padding: 12px; border-radius: 10px;">
                                            </div>
                                            <div class="form-group" style="margin-bottom: 25px;">
                                                <label style="margin-bottom: 8px; display: block;">Email Address</label>
                                                <input type="email" id="profileEmail" class="form-control"
                                                    value="admin@awarenessacademy.com" disabled
                                                    style="background: #f3f4f6; cursor: not-allowed; padding: 12px; border-radius: 10px;">
                                            </div>
                                            <div style="text-align: right;">
                                                <button type="submit" class="btn-primary"
                                                    style="padding: 12px 30px;">Save
                                                    Profile</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div> <!-- End scrollable-content -->
            </div> <!-- End scrollable-wrapper -->
        </main>
    </div>

    <!-- ADD USER MODAL -->
    <!-- Multi-Stage Add User Modal -->
    <div id="addUserModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; overflow-y: auto; padding: 20px 0;">
        <div class="glass-card"
            style="background: white; border-radius: 15px; width: 90%; max-width: 550px; margin: auto; max-height: calc(100vh - 40px); display: flex; flex-direction: column; position: relative;">
            <!-- Close Button -->
            <button onclick="closeAddUserModal()"
                style="position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 1.5rem; cursor: pointer; z-index: 10; color: #999; transition: color 0.3s;"
                onmouseover="this.style.color='#333'" onmouseout="this.style.color='#999'">&times;</button>

            <!-- Modal Header -->
            <div style="padding: 25px 30px 20px; border-bottom: 2px solid #f0f0f0;">
                <h3 style="margin: 0; color: #333; font-size: 1.5rem;">
                    <i class="fas fa-user-plus" style="color: #4a90e2; margin-right: 10px;"></i>
                    Add New User
                </h3>
                <!-- Progress Indicator -->
                <div id="stageProgress" style="display: flex; gap: 8px; margin-top: 15px;">
                    <div class="progress-dot active" data-stage="1"
                        style="flex: 1; height: 4px; background: #4a90e2; border-radius: 2px; transition: all 0.3s;">
                    </div>
                    <div class="progress-dot" data-stage="2"
                        style="flex: 1; height: 4px; background: #e0e0e0; border-radius: 2px; transition: all 0.3s;">
                    </div>
                    <div class="progress-dot" data-stage="3"
                        style="flex: 1; height: 4px; background: #e0e0e0; border-radius: 2px; transition: all 0.3s;">
                    </div>
                    <div class="progress-dot" data-stage="4"
                        style="flex: 1; height: 4px; background: #e0e0e0; border-radius: 2px; transition: all 0.3s;">
                    </div>
                </div>
            </div>

            <!-- Modal Body (Scrollable) -->
            <div style="padding: 30px; overflow-y: auto; flex: 1;">
                <form id="addUserForm">
                    <!-- Stage 1: Role Selection -->
                    <div class="user-form-stage" id="userStage1" style="display: block;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <i class="fas fa-user-tag"
                                style="font-size: 3rem; color: #4a90e2; margin-bottom: 15px;"></i>
                            <h4 style="color: #333; margin-bottom: 10px;">Select User Role</h4>
                            <p style="color: #666; font-size: 0.9rem;">Choose the appropriate role for this user</p>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 600; color: #555; margin-bottom: 10px; display: block;">User Role
                                <span style="color: #e74c3c;">*</span></label>
                            <select name="role" id="userRole" class="form-control"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;"
                                required>
                                <option value="">-- Select Role --</option>
                                <option value="Student">Student - Learning Platform Access</option>
                                <option value="Staff">Staff - Content Management & Teaching</option>
                                <option value="Admin">Admin - Full System Control</option>
                            </select>
                        </div>
                        <div
                            style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #4a90e2;">
                            <p style="margin: 0; font-size: 0.85rem; color: #666;">
                                <i class="fas fa-info-circle" style="color: #4a90e2; margin-right: 8px;"></i>
                                Each role will be assigned a unique ID upon creation
                            </p>
                        </div>
                    </div>

                    <!-- Stage 2: Name & Initial -->
                    <div class="user-form-stage" id="userStage2" style="display: none;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <i class="fas fa-id-card" style="font-size: 3rem; color: #4a90e2; margin-bottom: 15px;"></i>
                            <h4 style="color: #333; margin-bottom: 10px;">Personal Information</h4>
                            <p style="color: #666; font-size: 0.9rem;">Enter the user's basic details</p>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 600; color: #555; margin-bottom: 8px; display: block;">Full Name
                                <span style="color: #e74c3c;">*</span></label>
                            <input type="text" name="name" id="userName" class="form-control"
                                placeholder="e.g., John Doe"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;"
                                required>
                        </div>
                        <div class="form-group" style="margin-top: 20px;">
                            <label
                                style="font-weight: 600; color: #555; margin-bottom: 8px; display: block;">Initial</label>
                            <input type="text" name="initial" id="userInitial" class="form-control"
                                placeholder="e.g., K" maxlength="5"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <small style="color: #999; font-size: 0.8rem;">Optional - Used for formal
                                identification</small>
                        </div>
                        <div class="form-group" id="genderFieldContainer" style="margin-top: 20px; display: none;">
                            <label
                                style="font-weight: 600; color: #555; margin-bottom: 8px; display: block;">Gender</label>
                            <select name="gender" id="userGender" class="form-control"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;">
                                <option value="">-- Select --</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>

                    <!-- Stage 3: Contact & Credentials -->
                    <div class="user-form-stage" id="userStage3" style="display: none;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <i class="fas fa-key" style="font-size: 3rem; color: #4a90e2; margin-bottom: 15px;"></i>
                            <h4 style="color: #333; margin-bottom: 10px;">Contact & Credentials</h4>
                            <p style="color: #666; font-size: 0.9rem;">Set login details and contact information</p>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 600; color: #555; margin-bottom: 8px; display: block;">Email
                                Address <span style="color: #e74c3c;">*</span></label>
                            <input type="email" name="email" id="userEmail" class="form-control"
                                placeholder="user@example.com"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;"
                                required>
                        </div>
                        <div class="form-group" style="margin-top: 20px;">
                            <label style="font-weight: 600; color: #555; margin-bottom: 8px; display: block;">Phone
                                Number</label>
                            <input type="tel" name="phone" id="userPhone" class="form-control"
                                placeholder="+91 98765 43210"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;">
                        </div>
                        <div class="form-group" style="margin-top: 20px;">
                            <label style="font-weight: 600; color: #555; margin-bottom: 8px; display: block;">Password
                                <span style="color: #e74c3c;">*</span></label>
                            <input type="password" name="password" id="userPassword" class="form-control"
                                placeholder="Minimum 6 characters" minlength="6"
                                style="padding: 12px; font-size: 1rem; border: 2px solid #e0e0e0; border-radius: 8px;"
                                required>
                            <small style="color: #999; font-size: 0.8rem;">ðŸ”’ Password will be securely
                                encrypted</small>
                        </div>
                    </div>

                    <!-- Stage 4: Confirmation -->
                    <div class="user-form-stage" id="userStage4" style="display: none;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <i class="fas fa-clipboard-check"
                                style="font-size: 3rem; color: #4a90e2; margin-bottom: 15px;"></i>
                            <h4 style="color: #333; margin-bottom: 10px;">Confirm Details</h4>
                            <p style="color: #666; font-size: 0.9rem;">Please review before creating the account</p>
                        </div>
                        <div id="confirmationDetails"
                            style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #e0e0e0;">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Success Stage (Hidden initially) -->
                    <div class="user-form-stage" id="userStageSuccess" style="display: none; text-align: center;">
                        <div style="margin-bottom: 25px;">
                            <div
                                style="width: 80px; height: 80px; background: linear-gradient(135deg, #11998e, #38ef7d); border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; animation: scaleIn 0.5s ease;">
                                <i class="fas fa-check" style="font-size: 2.5rem; color: white;"></i>
                            </div>
                            <h4 style="color: #27ae60; margin-bottom: 10px;">User Created Successfully!</h4>
                            <p style="color: #666; font-size: 0.9rem;">The account has been created and is ready to use
                            </p>
                        </div>
                        <div
                            style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                            <p style="color: rgba(255,255,255,0.9); font-size: 0.9rem; margin-bottom: 8px;">Generated
                                User ID</p>
                            <div id="generatedUserId"
                                style="font-size: 1.8rem; font-weight: bold; color: white; letter-spacing: 2px; font-family: monospace;">
                                <!-- ID will be shown here -->
                            </div>
                        </div>
                        <div
                            style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
                            <p style="margin: 0; font-size: 0.85rem; color: #856404;">
                                <i class="fas fa-exclamation-triangle" style="margin-right: 8px;"></i>
                                <strong>Important:</strong> Please note this ID for future reference
                            </p>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Modal Footer -->
            <div id="stageActions"
                style="padding: 20px 30px; border-top: 2px solid #f0f0f0; display: flex; gap: 10px; justify-content: space-between;">
                <button type="button" id="btnPrevStage" onclick="previousUserStage()" class="btn-primary"
                    style="flex: 1; background: #6c757d; padding: 12px; font-size: 1rem; border-radius: 8px; display: none;">
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button type="button" id="btnNextStage" onclick="nextUserStage()" class="btn-primary"
                    style="flex: 2; background: #4a90e2; padding: 12px; font-size: 1rem; border-radius: 8px;">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button type="button" id="btnCreateUser" onclick="submitMultiStageUser()" class="btn-primary"
                    style="flex: 2; background: #27ae60; padding: 12px; font-size: 1rem; border-radius: 8px; display: none;">
                    <i class="fas fa-check-circle"></i> Create User
                </button>
                <button type="button" id="btnCloseSuccess" onclick="closeAddUserModal()" class="btn-primary"
                    style="flex: 1; background: #4a90e2; padding: 12px; font-size: 1rem; border-radius: 8px; display: none;">
                    <i class="fas fa-check"></i> Done
                </button>
            </div>
        </div>
    </div>

    <style>
        @keyframes scaleIn {
            from {
                transform: scale(0);
            }

            to {
                transform: scale(1);
            }
        }
    </style>

    <!-- COMPREHENSIVE EDIT MODAL -->
    <!-- COMPREHENSIVE EDIT MODAL -->
    <div id="editUserModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 500px; margin: 20px; position: relative; overflow: hidden; display: flex; flex-direction: column; max-height: 90vh;">

            <!-- Header -->
            <div
                style="padding: 20px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; background: #fafafa;">
                <div>
                    <h3 style="margin: 0; font-size: 1.3rem;">Edit User</h3>
                    <p id="auditInfo" style="font-size: 0.75rem; color: #999; margin: 0;">System Edit</p>
                </div>
                <span style="font-size: 2rem; cursor: pointer; line-height: 0.5;"
                    onclick="document.getElementById('editUserModal').style.display='none'">&times;</span>
            </div>

            <!-- Tabs -->
            <div
                style="display: flex; background: white; padding: 10px 30px 0; gap: 5px; border-bottom: 1px solid #eee;">
                <button type="button" class="edit-tab-btn active" onclick="switchEditTab('identity', this)"
                    style="padding: 10px 15px; background: none; border: none; border-bottom: 2px solid var(--color-primary); font-weight: 600; color: var(--color-primary); cursor: pointer;">Identity</button>
                <button type="button" class="edit-tab-btn" onclick="switchEditTab('profile', this)"
                    style="padding: 10px 15px; background: none; border: none; border-bottom: 2px solid transparent; color: #666; cursor: pointer;">Profile</button>
                <button type="button" class="edit-tab-btn" onclick="switchEditTab('security', this)"
                    style="padding: 10px 15px; background: none; border: none; border-bottom: 2px solid transparent; color: #666; cursor: pointer;">Security</button>
            </div>

            <form id="editUserForm" onsubmit="event.preventDefault(); submitEditUser();"
                style="flex: 1; overflow-y: auto; padding: 30px;">
                <input type="hidden" name="userId" id="editUserId">

                <!-- Tab 1: Identity -->
                <div id="editTab_identity" class="edit-section">
                    <div class="form-group mb-3"><label>Full Name</label><input type="text" name="name"
                            id="editUserName" class="form-control" required></div>
                    <div class="form-group mb-3"><label>Email</label><input type="email" name="email" id="editUserEmail"
                            class="form-control" required></div>
                    <div class="form-group mb-3"><label>Phone</label><input type="text" name="phone" id="editUserPhone"
                            class="form-control"></div>
                    <div class="form-group mb-3"><label>Role</label>
                        <select name="role" id="editUserRole" class="form-control">
                            <option value="Student">Student</option>
                            <option value="Staff">Staff</option>
                            <option value="Admin">Admin</option>
                        </select>
                    </div>
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn-primary" onclick="switchEditTab('profile', null, 1)">Next
                            &rarr;</button>
                    </div>
                </div>

                <!-- Tab 2: Profile -->
                <div id="editTab_profile" class="edit-section" style="display: none;">
                    <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group"><label>Father's Name</label><input type="text" name="fatherName"
                                id="editFatherName" class="form-control"></div>
                        <div class="form-group"><label>Mother's Name</label><input type="text" name="motherName"
                                id="editMotherName" class="form-control"></div>
                    </div>
                    <div class="form-grid"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div class="form-group"><label>Town/City</label><input type="text" name="address[town]"
                                id="editTown" class="form-control"></div>
                        <div class="form-group"><label>State</label><input type="text" name="address[state]"
                                id="editState" class="form-control"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                        <button type="button" class="btn-primary" style="background: #ccc;"
                            onclick="switchEditTab('identity', null, 0)">&larr; Back</button>
                        <button type="button" class="btn-primary" onclick="switchEditTab('security', null, 2)">Next
                            &rarr;</button>
                    </div>
                </div>

                <!-- Tab 3: Security & Save -->
                <div id="editTab_security" class="edit-section" style="display: none;">
                    <div class="form-group mb-3">
                        <label>New Password <small style="color: #999;">(Optional)</small></label>
                        <input type="password" name="password" class="form-control"
                            placeholder="Leave blank to keep current">
                    </div>

                    <div class="form-group"
                        style="background: #fff8e1; padding: 15px; border-radius: 8px; border: 1px solid #ffe082;">
                        <label style="color: #f57f17; font-weight: 600;">Reason for Update (Mandatory)</label>
                        <textarea name="reason" class="form-control" rows="2"
                            placeholder="Describe change (min 10 chars)..." required minlength="10"></textarea>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 25px;">
                        <button type="button" class="btn-primary" style="background: #ccc; flex: 1;"
                            onclick="switchEditTab('profile', null, 1)">&larr; Back</button>
                        <button type="submit" class="btn-primary" style="flex: 2;">Update User</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- STRICT DELETE CONFIRMATION MODAL -->
    <div id="deleteConfirmModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 40px; border-radius: 15px; width: 500px; text-align: center; border: 2px solid var(--color-error);">
            <i class="fas fa-exclamation-triangle"
                style="font-size: 3rem; color: var(--color-error); margin-bottom: 20px;"></i>
            <h2 style="color: var(--color-error); margin-bottom: 10px;">Irreversible Action</h2>
            <p style="color: #666; margin-bottom: 20px;">You are about to permanently delete a user. This cannot be
                undone. Consider deactivating instead.</p>

            <div
                style="background: #f8f8f8; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-family: monospace; font-size: 1.2rem; font-weight: bold;">
                ID: <span id="deleteTargetID" style="color: #333;">LOADING...</span>
            </div>

            <p style="font-size: 0.9rem; margin-bottom: 10px;">Type the ID exactly as shown above to confirm:</p>
            <input type="text" id="deleteIDInput" class="form-control"
                style="text-align: center; font-family: monospace; font-size: 1.1rem; letter-spacing: 1px;"
                placeholder="Enter ID here">

            <textarea id="deleteReason" class="form-control" rows="2" placeholder="Reason for deletion (Mandatory)..."
                style="margin-top: 15px;" required></textarea>

            <div style="display: flex; gap: 15px; margin-top: 25px;">
                <button onclick="confirmDeleteAction()" class="btn-primary"
                    style="background: var(--color-error); flex: 1;">I understand, DELETE.</button>
                <button onclick="closeDeleteModal()" class="btn-primary"
                    style="background: #ccc; flex: 1;">Cancel</button>
            </div>
            <button onclick="suggestionDeactivate()"
                style="display: block; width: 100%; margin-top: 15px; background: none; border: none; color: var(--color-primary); text-decoration: underline; cursor: pointer;">Safe
                Alternative: Deactivate User</button>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal" id="reviewModal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); align-items: center; justify-content: center; z-index: 1000;">
        <div class="modal-content glass-card"
            style="background: white; padding: 30px; border-radius: 15px; width: 500px;">
            <h2 id="reviewTitle">Review Content</h2>
            <div id="filePreview"
                style="margin: 20px 0; padding: 15px; background: #f8f8f8; border-radius: 8px; text-align: center;">
                <!-- Link to file will be here -->
            </div>
            <textarea id="adminRemarks" class="form-control" placeholder="Admin remarks/feedback for staff..." rows="3"
                style="width: 100%; margin-bottom: 20px;"></textarea>
            <div style="display: flex; gap: 10px;">
                <button onclick="submitReview('Approved')" class="btn-primary"
                    style="background: var(--color-success); flex: 1;">Approve</button>
                <button onclick="submitReview('Rejected')" class="btn-primary"
                    style="background: var(--color-error); flex: 1;">Reject</button>
                <button onclick="document.getElementById('reviewModal').style.display='none'" class="btn-primary"
                    style="background: var(--color-text-secondary); flex: 1;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Fixed Add User Button (Bottom Left) -->

    <!-- COURSE MODAL -->
    <div id="courseModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 90%; max-width: 900px; margin: 20px; position: relative; overflow: hidden; display: flex; flex-direction: column; max-height: 90vh;">

            <!-- Header -->
            <div
                style="padding: 20px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; background: #fafafa;">
                <h3 id="courseModalTitle" style="margin: 0; font-size: 1.3rem;">Add New Course</h3>
                <span style="font-size: 2rem; cursor: pointer; line-height: 0.5;"
                    onclick="document.getElementById('courseModal').style.display='none'">&times;</span>
            </div>

            <!-- Stepper Header -->
            <div style="padding: 25px 30px 10px; background: white;">
                <div class="stepper-header"
                    style="display: flex; justify-content: space-between; margin-bottom: 30px; position: relative; max-width: 850px; margin-left: auto; margin-right: auto;">
                    <!-- Line -->
                    <div
                        style="position: absolute; top: 15px; left: 0; width: 100%; height: 2px; background: #eee; z-index: 1;">
                    </div>
                    <div id="adminStepProgress"
                        style="position: absolute; top: 15px; left: 0; height: 2px; background: var(--color-saffron); z-index: 1; width: 0%; transition: width 0.3s;">
                    </div>

                    <!-- Steps -->
                    <div class="step-indicator active" data-step="1" onclick="jumpAdminStep(1)"
                        style="padding: 8px 16px; border-radius: 20px; background: var(--color-saffron); color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; position: relative; z-index: 2; font-size: 0.85rem; cursor: pointer; white-space: nowrap;">
                        Basic Info</div>
                    <div class="step-indicator" data-step="2" onclick="jumpAdminStep(2)"
                        style="padding: 8px 16px; border-radius: 20px; background: #eee; color: #999; display: flex; align-items: center; justify-content: center; font-weight: bold; position: relative; z-index: 2; font-size: 0.85rem; cursor: pointer; white-space: nowrap;">
                        Key Details</div>
                    <div class="step-indicator" data-step="3" onclick="jumpAdminStep(3)"
                        style="padding: 8px 16px; border-radius: 20px; background: #eee; color: #999; display: flex; align-items: center; justify-content: center; font-weight: bold; position: relative; z-index: 2; font-size: 0.85rem; cursor: pointer; white-space: nowrap;">
                        Media</div>
                    <div class="step-indicator" data-step="4" onclick="jumpAdminStep(4)"
                        style="padding: 8px 16px; border-radius: 20px; background: #eee; color: #999; display: flex; align-items: center; justify-content: center; font-weight: bold; position: relative; z-index: 2; font-size: 0.85rem; cursor: pointer; white-space: nowrap;">
                        Faculty</div>
                    <div class="step-indicator" data-step="5" onclick="jumpAdminStep(5)"
                        style="padding: 8px 16px; border-radius: 20px; background: #eee; color: #999; display: flex; align-items: center; justify-content: center; font-weight: bold; position: relative; z-index: 2; font-size: 0.85rem; cursor: pointer; white-space: nowrap;">
                        Finalize</div>
                </div>
                <div style="text-align: center; margin-bottom: 10px; font-weight: 600; color: #555; display: none;">
                    <span id="stepLabel">Essential Details</span>
                </div>
            </div>

            <form id="courseForm" onsubmit="event.preventDefault();"
                style="flex: 1; overflow-y: auto; padding: 20px 40px;">
                <input type="hidden" id="courseId">

                <!-- Step 1: Essentials -->
                <div id="adminCourseStep1" class="wizard-step">
                    <div class="form-group mb-3">
                        <label>Course Title <span style="color:red">*</span></label>
                        <input type="text" id="courseTitle" class="form-control" role="presentation" autocomplete="off"
                            placeholder="e.g. Advanced Meditation">
                    </div>
                    <div class="form-group mb-3">
                        <label>Category <span style="color:red">*</span></label>
                        <input type="text" id="courseCategory" class="form-control" role="presentation"
                            autocomplete="off" placeholder="e.g. Spiritual, Tech">
                    </div>
                    <div class="form-group mb-3">
                        <label>Difficulty <span style="color:red">*</span></label>
                        <select id="courseDifficulty" class="form-control">
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Advanced">Advanced</option>
                        </select>
                    </div>
                </div>

                <!-- Step 2: Key Details -->
                <div id="adminCourseStep2" class="wizard-step" style="display: none;">
                    <div class="form-group mb-3">
                        <label>Description <span style="color:red">*</span></label>
                        <textarea id="courseDesc" class="form-control" rows="4"
                            placeholder="Course summary..."></textarea>
                    </div>
                    <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group mb-3">
                            <label>Price (â‚¹) <span style="color:red">*</span></label>
                            <input type="number" id="coursePrice" class="form-control" min="0" placeholder="0 for Free">
                        </div>
                        <div class="form-group mb-3">
                            <label>Duration <span style="color:red">*</span></label>
                            <input type="text" id="courseDuration" class="form-control" placeholder="e.g. 4 Weeks">
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label>Thumbnail URL</label>
                        <input type="text" id="courseThumb" class="form-control" placeholder="https://...">
                    </div>
                </div>

                <!-- Step 3: Intro & Preview -->
                <div id="adminCourseStep3" class="wizard-step" style="display: none;">
                    <div class="form-group mb-3">
                        <label>Introduction Text</label>
                        <textarea id="courseIntroText" class="form-control" rows="3"
                            placeholder="Compelling headline for the landing page..."></textarea>
                    </div>
                    <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>Preview Duration (Sec)</label>
                            <input type="number" id="coursePreviewDuration" class="form-control" value="60" min="0">
                        </div>
                        <div class="form-group">
                            <label>Introduction Video</label>
                            <div id="adminIntroVideoDropzone"
                                style="border: 2px dashed #ddd; padding: 20px; text-align: center; border-radius: 8px; position: relative; cursor: pointer; background: #fafafa; transition: all 0.2s;">
                                <div id="adminDropzoneContent">
                                    <i class="fas fa-cloud-upload-alt"
                                        style="font-size: 1.5rem; color: #ccc; margin-bottom: 5px;"></i><br>
                                    <span style="font-size: 0.85rem; color: #666;">Drag & Drop Video</span>
                                </div>
                                <input type="file" id="adminIntroVideoInput" accept="video/*"
                                    style="opacity: 0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: pointer;">
                                <input type="hidden" id="courseIntroVideoUrl">

                                <div id="adminUploadProgress"
                                    style="display: none; height: 4px; background: #eee; margin-top: 10px; border-radius: 2px; overflow: hidden;">
                                    <div id="adminProgressBar"
                                        style="width: 0%; height: 100%; background: var(--color-success);"></div>
                                </div>

                                <div id="adminVideoPreview" style="display: none; margin-top: 10px;">
                                    <!-- Moved outside dropzone -->
                                </div>
                            </div>

                            <!-- Actual Preview Output (Outside Dropzone) -->
                            <div id="adminVideoPreviewContainer"
                                style="display: none; margin-top: 15px; padding: 15px; background: #f0fff4; border: 1px solid #c3e6cb; border-radius: 8px;">
                                <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                                    <div
                                        style="display: flex; align-items: center; justify-content: center; gap: 5px; color: var(--color-success); font-weight: 600; font-size: 0.9rem;">
                                        <i class="fas fa-check-circle"></i> Video Uploaded
                                        <button type="button" id="adminRemoveVideoBtn"
                                            style="background: #fee; border: none; color: var(--color-error); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-left: 10px; font-size: 1rem;">&times;</button>
                                    </div>
                                    <a id="adminVideoLink" href="#" target="_blank" class="btn-primary"
                                        style="padding: 8px 16px; font-size: 0.9rem; text-decoration: none; background: #17a2b8;">
                                        <i class="fas fa-play"></i> Watch Video
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Faculty Allocation -->
                <div id="adminCourseStep4" class="wizard-step" style="display: none;">
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin: 0 0 10px 0; color: #333;">Faculty Allocation</h4>
                        <p style="margin: 0; color: #666; font-size: 0.9rem;">Assign mentors to facilitate this course.
                        </p>
                    </div>
                    <div class="form-group mb-3">
                        <label>Assign Mentors <span style="color:red">*</span></label>
                        <div id="mentorListContainer"
                            style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; max-height: 300px; overflow-y: auto; background: #fcfcfc;">
                            <p style="color:#999;">Loading...</p>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Finalize Status -->
                <div id="adminCourseStep5" class="wizard-step" style="display: none;">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h4 style="color: #333; margin-bottom: 10px;">Ready to Finalize?</h4>
                        <p style="color: #666; font-size: 0.95rem;">Choose an action to proceed.</p>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 15px; max-width: 400px; margin: 0 auto;">
                        <button type="button" class="btn-primary" onclick="saveCourse(event, 'Draft')"
                            style="width: 100%; padding: 15px; background: #fff3cd; color: #856404; border: 1px solid #ffeeba; text-align: left; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-save" style="font-size: 1.2rem;"></i>
                            <div>
                                <div style="font-weight: 600;">Save as Draft</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Save your progress and edit later</div>
                            </div>
                        </button>

                        <button type="button" class="btn-primary" onclick="saveCourse(event, 'Approved')"
                            style="width: 100%; padding: 15px; background: #e3f2fd; color: #0d47a1; border: 1px solid #bbdefb; text-align: left; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-calendar-alt" style="font-size: 1.2rem;"></i>
                            <div>
                                <div style="font-weight: 600;">Mark as Upcoming (Approved)</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Visible as 'Upcoming' to students</div>
                            </div>
                        </button>

                        <button type="button" class="btn-primary" onclick="saveCourse(event, 'Published')"
                            style="width: 100%; padding: 15px; background: #e6f4ea; color: #1e7e34; border: 1px solid #c3e6cb; text-align: left; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-globe" style="font-size: 1.2rem;"></i>
                            <div>
                                <div style="font-weight: 600;">Publish Course</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Make visible to all students immediately
                                </div>
                            </div>
                        </button>

                        <button type="button" class="btn-primary" onclick="saveCourse(event, 'Archived')"
                            style="width: 100%; padding: 15px; background: #f8f9fa; color: #6c757d; border: 1px solid #dee2e6; text-align: left; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-archive" style="font-size: 1.2rem;"></i>
                            <div>
                                <div style="font-weight: 600;">Archive Course</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Hide from new enrollments</div>
                            </div>
                        </button>
                    </div>
                </div>
            </form>

            <!-- Footer Buttons -->
            <div
                style="padding: 20px 40px; border-top: 1px solid #eee; display: flex; justify-content: space-between; background: #fafafa;">
                <button type="button" id="prevBtn" class="btn-primary"
                    style="background: #ccc; padding: 10px 25px; visibility: hidden;"
                    onclick="changeAdminStep(-1)">Back</button>
                <div style="display: flex; gap: 10px;">
                    <button type="button" id="draftBtn" class="btn-primary"
                        style="background: #ffc107; color: #000; display: none;"
                        onclick="saveCourse(event, 'Draft')">Save
                        Draft</button>
                    <button type="button" id="nextBtn" class="btn-primary" style="padding: 10px 30px;"
                        onclick="changeAdminStep(1)">Next</button>
                    <button type="button" id="publishBtn" class="btn-primary"
                        style="background: var(--color-success); padding: 10px 30px; display: none;"
                        onclick="saveCourse(event, 'Published')">Publish Course</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Course Details Modal -->
    <div id="viewCourseModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 3000; align-items: center; justify-content: center; overflow-y: auto;">
        <div class="glass-card"
            style="background: white; padding: 40px; border-radius: 15px; width: 900px; max-width: 90vw; margin: 20px; position: relative; max-height: 90vh; overflow-y: auto;">
            <span class="close-modal-x"
                onclick="document.getElementById('viewCourseModal').style.display='none'">&times;</span>
            <h2 id="viewCourseTitle" style="margin-bottom: 10px;">Course Details</h2>
            <div id="viewCourseInfo"
                style="margin-bottom: 20px; padding: 15px; background: #f8f8f8; border-radius: 8px;">
                <!-- Course info will be loaded here -->
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3 style="margin: 0;">Enrolled Students</h3>
                <div>
                    <button onclick="selectAllStudents()" class="btn-primary"
                        style="padding: 8px 15px; font-size: 0.85rem; margin-right: 10px;">
                        <i class="fas fa-check-square"></i> Select All
                    </button>
                    <button onclick="removeSelectedStudents()" class="btn-primary"
                        style="background: var(--color-error); padding: 8px 15px; font-size: 0.85rem;">
                        <i class="fas fa-user-minus"></i> Remove Selected
                    </button>
                </div>
            </div>

            <div style="max-height: 400px; overflow-y: auto; border: 1px solid #eee; border-radius: 8px;">
                <table class="data-table" style="width: 100%;">
                    <thead style="position: sticky; top: 0; background: #fafafa; z-index: 1;">
                        <tr>
                            <th style="padding: 12px; width: 40px;"><input type="checkbox" id="selectAllCheckbox"
                                    onchange="toggleAllStudents(this)"></th>
                            <th style="padding: 12px;">Student ID</th>
                            <th style="padding: 12px;">Name</th>
                            <th style="padding: 12px;">Email</th>
                            <th style="padding: 12px;">Enrolled</th>
                            <th style="padding: 12px;">Progress</th>
                        </tr>
                    </thead>
                    <tbody id="viewCourseStudents">
                        <!-- Students list will be loaded here -->
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; text-align: right;">
                <button onclick="document.getElementById('viewCourseModal').style.display='none'" class="btn-primary"
                    style="background: #999;">Close</button>
            </div>
        </div>
    </div>

    <!-- Delete Course Confirmation Modal -->
    <div id="deleteCourseModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box;">
        <div class="glass-card"
            style="background: white; padding: 30px; border-radius: 15px; width: 650px; max-width: 100%; max-height: 90vh; display: flex; flex-direction: column; position: relative;">
            <span class="close-modal-x" onclick="closeCourseDeleteModal()">&times;</span>

            <!-- Progress Indicator -->
            <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 25px; gap: 10px;">
                <div class="delete-step-indicator" data-step="1" style="display: flex; align-items: center; gap: 10px;">
                    <div class="step-circle"
                        style="width: 35px; height: 35px; border-radius: 50%; background: var(--color-saffron); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem;">
                        1</div>
                    <span style="font-size: 0.85rem; color: #666;">Details</span>
                </div>
                <div style="width: 40px; height: 2px; background: #ddd;"></div>
                <div class="delete-step-indicator" data-step="2" style="display: flex; align-items: center; gap: 10px;">
                    <div class="step-circle"
                        style="width: 35px; height: 35px; border-radius: 50%; background: #ddd; color: #999; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem;">
                        2</div>
                    <span style="font-size: 0.85rem; color: #999;">Enrollments</span>
                </div>
                <div style="width: 40px; height: 2px; background: #ddd;"></div>
                <div class="delete-step-indicator" data-step="3" style="display: flex; align-items: center; gap: 10px;">
                    <div class="step-circle"
                        style="width: 35px; height: 35px; border-radius: 50%; background: #ddd; color: #999; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem;">
                        3</div>
                    <span style="font-size: 0.85rem; color: #999;">Confirm</span>
                </div>
            </div>

            <!-- Scrollable Content Area -->
            <div style="flex: 1; overflow-y: auto; margin-bottom: 20px;">
                <!-- Stage 1: Course Details -->
                <div id="deleteStage1" class="delete-stage" style="display: block;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-info-circle"
                            style="font-size: 3rem; color: var(--color-saffron); margin-bottom: 15px;"></i>
                        <h2 style="margin: 0 0 10px 0; color: #333;">Course Information</h2>
                        <p style="color: #666; font-size: 0.9rem;">Review the course details before proceeding</p>
                    </div>
                    <div id="deleteCourseDetailsContent"
                        style="padding: 20px; background: #f8f8f8; border-radius: 8px;">
                        <!-- Course details will be loaded here -->
                    </div>
                </div>

                <!-- Stage 2: Enrollments -->
                <div id="deleteStage2" class="delete-stage" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-users"
                            style="font-size: 3rem; color: var(--color-primary); margin-bottom: 15px;"></i>
                        <h2 style="margin: 0 0 10px 0; color: #333;">Student Enrollments</h2>
                        <p style="color: #666; font-size: 0.9rem;">Check current and completed enrollments</p>
                    </div>
                    <div id="deleteCourseEnrollmentsContent">
                        <!-- Enrollment info will be loaded here -->
                    </div>
                </div>

                <!-- Stage 3: Confirmation -->
                <div id="deleteStage3" class="delete-stage" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-exclamation-triangle"
                            style="font-size: 3rem; color: var(--color-error); margin-bottom: 15px;"></i>
                        <h2 style="margin: 0 0 10px 0; color: var(--color-error);">Final Confirmation</h2>
                        <p style="color: #666; font-size: 0.9rem;">Type the Course ID to confirm deletion</p>
                    </div>
                    <div
                        style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; text-align: center;">
                        <p style="margin: 0 0 10px 0; font-size: 0.85rem; color: #856404;">Course ID:</p>
                        <div style="font-family: monospace; font-size: 1.3rem; font-weight: bold; color: #333;"
                            id="deleteCourseIdDisplay"></div>
                    </div>
                    <input type="text" id="deleteCourseIdInput" class="form-control"
                        style="text-align: center; font-family: monospace; font-size: 1.1rem; letter-spacing: 1px;"
                        placeholder="Enter Course ID here">
                </div>
            </div>

            <!-- Action Buttons -->
            <div id="deleteStageButtons"
                style="display: flex; gap: 15px; border-top: 1px solid #eee; padding-top: 20px;">
                <!-- Buttons will be dynamically updated -->
            </div>
        </div>
    </div>

    <!-- Disable Confirmation Modal -->
    <div id="disableConfirmModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 30px; border-radius: 15px; width: 450px; text-align: center;">
            <i class="fas fa-user-slash"
                style="font-size: 2.5rem; color: var(--color-warning); margin-bottom: 15px;"></i>
            <h3 style="color: #333; margin-bottom: 10px;">Confirm Deactivation</h3>

            <p style="color: #666; margin-bottom: 20px; font-size: 0.95rem; line-height: 1.5;">
                By disabling ID: <span id="disableTargetID" style="font-weight: bold; color: #333;">...</span> <br>
                The user will remain in the database but will <b>not be able to access the platform</b>. <br>
                You can reactivate this account anytime.
            </p>

            <div style="display: flex; gap: 15px; margin-top: 25px;">
                <button id="confirmDisableBtn" class="btn-primary"
                    style="background: var(--color-warning); flex: 1;">Confirm Disable</button>
                <button onclick="document.getElementById('disableConfirmModal').style.display='none'"
                    class="btn-primary" style="background: #ccc; flex: 1;">Cancel</button>
            </div>
        </div>
    </div>




    <!-- Message Details Modal -->
    <div id="messageDetailsModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 3000; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 90vw; max-width: 800px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;">

            <!-- Modal Header -->
            <div
                style="padding: 25px; border-bottom: 2px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <div style="flex: 1;">
                    <h2 style="margin: 0 0 5px 0; color: #333;">
                        <i class="fas fa-envelope-open" style="color: var(--color-saffron); margin-right: 10px;"></i>
                        Message Details
                    </h2>
                    <p id="modalMessageDate" style="margin: 0; color: #666; font-size: 0.9rem;"></p>
                </div>
                <button onclick="closeMessageModal()"
                    style="background: none; border: none; font-size: 1.8rem; color: #999; cursor: pointer; padding: 5px 15px;"
                    title="Close">
                    &times;
                </button>
            </div>

            <!-- Modal Body -->
            <div style="padding: 30px; overflow-y: auto; flex: 1;">
                <!-- Sender Info -->
                <div style="margin-bottom: 25px; padding: 20px; background: #f9fafb; border-radius: 10px;">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <div>
                            <label
                                style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 5px;">Name</label>
                            <p id="modalMessageName" style="margin: 0; color: #111827; font-size: 1rem;"></p>
                        </div>
                        <div>
                            <label
                                style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 5px;">Email</label>
                            <p id="modalMessageEmail" style="margin: 0; color: #111827; font-size: 1rem;"></p>
                        </div>
                    </div>
                </div>

                <!-- Subject -->
                <div style="margin-bottom: 25px;">
                    <label
                        style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 8px;">Subject</label>
                    <p id="modalMessageSubject" style="margin: 0; color: #111827; font-size: 1.1rem; font-weight: 500;">
                    </p>
                </div>

                <!-- Status & Priority -->
                <div style="margin-bottom: 25px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <div>
                        <label
                            style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 8px;">Status</label>
                        <select id="modalMessageStatus" class="form-control" onchange="updateMessageStatus()">
                            <option value="New">New</option>
                            <option value="Read">Read</option>
                            <option value="Replied">Replied</option>
                            <option value="Archived">Archived</option>
                        </select>
                    </div>
                    <div>
                        <label
                            style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 8px;">Priority</label>
                        <select id="modalMessagePriority" class="form-control" onchange="updateMessagePriority()">
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                            <option value="Urgent">Urgent</option>
                        </select>
                    </div>
                </div>

                <!-- Message -->
                <div style="margin-bottom: 25px;">
                    <label
                        style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 8px;">Message</label>
                    <div id="modalMessageContent"
                        style="padding: 15px; background: #f9fafb; border-radius: 8px; border-left: 4px solid var(--color-saffron); white-space: pre-wrap; line-height: 1.8; color: #374151;">
                    </div>
                </div>

                <!-- Admin Notes -->
                <div style="margin-bottom: 25px;">
                    <label
                        style="font-weight: 600; color: #6b7280; font-size: 0.85rem; display: block; margin-bottom: 8px;">Admin
                        Notes</label>
                    <textarea id="modalAdminNotes" class="form-control" rows="3"
                        placeholder="Add internal notes about this message..."></textarea>
                </div>

                <!-- Technical Info -->
                <details style="margin-bottom: 20px;">
                    <summary
                        style="cursor: pointer; font-weight: 600; color: #6b7280; font-size: 0.9rem; padding: 10px; background: #f3f4f6; border-radius: 6px;">
                        Technical Information</summary>
                    <div
                        style="padding: 15px; background: #fafafa; border-radius: 6px; margin-top: 10px; font-size: 0.85rem;">
                        <p style="margin: 5px 0;"><strong>IP Address:</strong> <span id="modalMessageIP"></span></p>
                        <p style="margin: 5px 0;"><strong>User Agent:</strong> <span id="modalMessageUA"></span></p>
                        <p style="margin: 5px 0;"><strong>Source:</strong> <span id="modalMessageSource"></span></p>
                    </div>
                </details>
            </div>

            <!-- Modal Footer -->
            <div
                style="padding: 20px 30px; border-top: 2px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; gap: 15px; flex-shrink: 0;">
                <button class="btn-danger" onclick="deleteMessage()" style="padding: 10px 20px;">
                    <i class="fas fa-trash"></i> Delete
                </button>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-secondary" onclick="closeMessageModal()"
                        style="padding: 10px 20px; background: #e5e7eb; color: #374151; border: none; border-radius: 8px; cursor: pointer;">
                        Cancel
                    </button>
                    <button class="btn-primary" onclick="saveMessageNotes()" style="padding: 10px 20px;">
                        <i class="fas fa-save"></i> Save Notes
                    </button>
                    <a id="replyEmailLink" href="" class="btn-primary"
                        style="padding: 10px 20px; text-decoration: none; display: inline-block;">
                        <i class="fas fa-reply"></i> Reply via Email
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Materials Management Modal -->
    <div id="materialsModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 90vw; max-width: 1100px; max-height: 90vh; display: flex; flex-direction: column;">

            <!-- Modal Header -->
            <div
                style="padding: 25px; border-bottom: 2px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <div>
                    <h2 style="margin: 0 0 5px 0; color: #333;">
                        <i class="fas fa-book" style="color: var(--color-saffron); margin-right: 10px;"></i>
                        Course Materials
                    </h2>
                    <p id="materialsCourseName" style="margin: 0; color: #666; font-size: 0.9rem;"></p>
                </div>
                <button onclick="closeMaterialsModal()"
                    style="background: none; border: none; font-size: 1.8rem; color: #999; cursor: pointer; padding: 5px 15px;"
                    title="Close">
                    &times;
                </button>
            </div>

            <!-- Stats Cards -->
            <div id="materialStats"
                style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 20px; border-bottom: 1px solid #f0f0f0; flex-shrink: 0;">
                <!-- Will be dynamically populated -->
            </div>

            <!-- Materials Content (Scrollable) -->
            <div style="flex: 1; overflow-y: auto; padding: 20px;">

                <!-- Materials by Category -->
                <div id="materialsByCategory">
                    <!-- Will be dynamically populated -->
                </div>

                <!-- Pending Approvals Section -->
                <div id="pendingApprovalsSection" style="margin-top: 30px;">
                    <h3 style="color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-clock" style="color: var(--color-warning);"></i>
                        Waiting for Approval
                    </h3>
                    <div id="pendingMaterialsList">
                        <!-- Will be dynamically populated -->
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div
                style="padding: 20px; border-top: 2px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <button onclick="openUploadMaterialModal()" class="btn-primary"
                    style="background: var(--color-saffron);">
                    <i class="fas fa-upload"></i> Upload New Material
                </button>
                <button onclick="closeMaterialsModal()" class="btn-primary" style="background: #999;">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Upload Material Modal (Admin/Staff) -->
    <div id="uploadMaterialModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3500; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 600px; max-height: 90vh; display: flex; flex-direction: column;">

            <!-- Header -->
            <div
                style="padding: 25px; border-bottom: 2px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <h3 style="margin: 0; color: #333;">
                    <i class="fas fa-upload" style="color: var(--color-saffron); margin-right: 10px;"></i>
                    Upload Course Material
                </h3>
                <button onclick="closeUploadMaterialModal()"
                    style="background: none; border: none; font-size: 1.8rem; color: #999; cursor: pointer; padding: 5px 15px;">
                    &times;
                </button>
            </div>

            <!-- Form -->
            <form id="uploadMaterialForm" enctype="multipart/form-data"
                style="flex: 1; overflow-y: auto; padding: 25px;">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333;">
                        Material Title <span style="color: red;">*</span>
                    </label>
                    <input type="text" id="materialTitle" class="form-control"
                        placeholder="e.g., Introduction to Meditation" required>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333;">
                        Material Type <span style="color: red;">*</span>
                    </label>
                    <select id="materialType" class="form-control" required onchange="updateFileAccept()">
                        <option value="">Select Type</option>
                        <option value="PDF">PDF Document</option>
                        <option value="Video">Video</option>
                        <option value="Audio">Audio</option>
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333;">
                        Upload File <span style="color: red;">*</span>
                    </label>
                    <input type="file" id="materialFile" class="form-control" required
                        accept=".pdf,.mp4,.mp3,.wav,.avi,.mov,.m4a">
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Accepted: PDF, MP4, MP3, WAV, AVI, MOV, M4A
                    </small>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333;">
                        Preview Duration (seconds)
                    </label>
                    <input type="number" id="previewDuration" class="form-control" placeholder="0" min="0" value="0">
                    <small style="color: #666; display: block; margin-top: 5px;">
                        How long students can preview before purchasing (0 = no preview)
                    </small>
                </div>

                <div style="padding: 15px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 8px;">
                    <p style="margin: 0; font-size: 0.9rem; color: #1976d2;">
                        <i class="fas fa-info-circle"></i>
                        <strong>Note:</strong> Material will be uploaded to course:
                        <strong id="uploadMaterialCourseName"></strong>
                    </p>
                </div>
            </form>

            <!-- Footer -->
            <div
                style="padding: 20px; border-top: 2px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 15px; flex-shrink: 0;">
                <button type="button" onclick="closeUploadMaterialModal()" class="btn-primary"
                    style="background: #999;">
                    Cancel
                </button>
                <button type="button" onclick="submitMaterialUpload()" class="btn-primary"
                    style="background: var(--color-saffron);">
                    <i class="fas fa-upload"></i> Upload Material
                </button>
            </div>
        </div>
    </div>

    <!-- Material View/Action Modal -->
    <div id="materialActionModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3500; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 90vw; max-width: 700px; max-height: 90vh; display: flex; flex-direction: column;">

            <!-- Header -->
            <div
                style="padding: 25px; border-bottom: 2px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <h3 style="margin: 0; color: #333;" id="materialActionTitle">Material Details</h3>
                <button onclick="closeMaterialActionModal()"
                    style="background: none; border: none; font-size: 1.8rem; color: #999; cursor: pointer; padding: 5px 15px;">
                    &times;
                </button>
            </div>

            <!-- Content (Scrollable) -->
            <div id="materialActionContent" style="flex: 1; overflow-y: auto; padding: 25px;">
                <!-- Will be dynamically populated -->
            </div>

            <!-- Footer Actions -->
            <div id="materialActionFooter"
                style="padding: 20px; border-top: 2px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 10px; flex-shrink: 0;">
                <!-- Will be dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Delete Material Confirmation Modal -->
    <div id="deleteMaterialModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 4000; align-items: center; justify-content: center;">
        <div class="glass-card"
            style="background: white; padding: 30px; border-radius: 15px; width: 500px; text-align: center;">
            <i class="fas fa-exclamation-triangle"
                style="font-size: 3rem; color: var(--color-error); margin-bottom: 15px;"></i>
            <h3 style="color: #333; margin-bottom: 15px;">Permanently Delete Material?</h3>
            <p id="deleteMaterialInfo" style="color: #666; margin-bottom: 20px; line-height: 1.6;"></p>

            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin: 0; font-size: 0.85rem; color: #856404; font-weight: 600;">
                    <i class="fas fa-info-circle"></i> This action cannot be undone!
                </p>
            </div>

            <div style="display: flex; gap: 15px;">
                <button onclick="closeDeleteMaterialModal()" class="btn-primary" style="background: #999; flex: 1;">
                    Cancel
                </button>
                <button id="confirmDeleteMaterialBtn" class="btn-primary"
                    style="background: var(--color-error); flex: 1;">
                    <i class="fas fa-trash"></i> Delete Permanently
                </button>
            </div>
        </div>
    </div>

    <!-- Ticket Detail Modal -->
    <div id="ticketDetailModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center; overflow-y: auto; padding: 20px;">
        <div class="modal-content"
            style="background: white; border-radius: 15px; max-width: 900px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2); position: relative;">
            <div
                style="position: sticky; top: 0; background: white; z-index: 10; display: flex; justify-content: space-between; align-items: center; padding: 25px 30px; border-bottom: 2px solid #f0f0f0; border-radius: 15px 15px 0 0;">
                <h3 style="margin: 0; color: #333; font-size: 1.5rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-ticket-alt" style="color: var(--color-primary);"></i>
                    Ticket Details
                </h3>
                <button onclick="closeTicketDetailModal()" class="btn-primary"
                    style="background: #e74c3c; padding: 10px 18px; border-radius: 8px; border: none; cursor: pointer; transition: all 0.2s;">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>

            <div id="ticketDetailContent" style="padding: 30px;">


                <!-- Ticket details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Message Details Modal -->
    <div id="messageDetailsModal" class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 5000; justify-content: center; align-items: center;">
        <div class="glass-card"
            style="background: white; padding: 0; border-radius: 15px; width: 800px; max-width: 90vw; max-height: 90vh; display: flex; flex-direction: column;">
            <div
                style="padding: 20px 30px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-envelope-open-text" style="color: var(--color-saffron);"></i> Message Details
                </h3>
                <button onclick="closeMessageModal()"
                    style="background: none; border: none; font-size: 1.5rem; color: #999; cursor: pointer;">&times;</button>
            </div>

            <div style="padding: 30px; overflow-y: auto; flex: 1;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                    <div>
                        <h2 id="modalMessageSubject" style="margin: 0 0 5px 0; font-size: 1.5rem;">Subject Line</h2>
                        <div style="display: flex; align-items: center; gap: 15px; color: #666; font-size: 0.9rem;">
                            <span><i class="fas fa-user"></i> <span id="modalMessageName">Sender Name</span></span>
                            <span><i class="fas fa-clock"></i> <span id="modalMessageDate">Date</span></span>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <select id="modalMessageStatus" class="form-control" style="width: auto; margin-bottom: 5px;"
                            onchange="updateMessageStatus(this.value)">
                            <option value="New">New</option>
                            <option value="Read">Read</option>
                            <option value="Replied">Replied</option>
                            <option value="Archived">Archived</option>
                        </select>
                        <br>
                        <select id="modalMessagePriority" class="form-control" style="width: auto; font-size: 0.8rem;"
                            onchange="updateMessagePriority(this.value)">
                            <option value="Low">Low Priority</option>
                            <option value="Medium">Medium Priority</option>
                            <option value="High">High Priority</option>
                            <option value="Urgent">Urgent</option>
                        </select>
                    </div>
                </div>

                <div
                    style="background: #fdfaf7; padding: 20px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.05); margin-bottom: 25px;">
                    <p id="modalMessageContent" style="white-space: pre-wrap; margin: 0; line-height: 1.6;">Message
                        content...</p>
                </div>

                <div
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; font-size: 0.9rem; color: #666;">
                    <div>
                        <strong>Email:</strong> <span id="modalMessageEmail">email@example.com</span>
                    </div>
                    <div>
                        <strong>Source:</strong> <span id="modalMessageSource">Website</span>
                    </div>
                    <div>
                        <strong>IP Address:</strong> <span id="modalMessageIP">127.0.0.1</span>
                    </div>
                    <div>
                        <strong>User Agent:</strong> <span id="modalMessageUA" style="font-size: 0.8rem;">Browser
                            Info</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Admin Notes</label>
                    <textarea id="modalAdminNotes" class="form-control" rows="3"
                        placeholder="Internal notes not visible to sender..."></textarea>
                    <button class="btn-primary" style="margin-top: 10px; font-size: 0.8rem; padding: 5px 15px;"
                        onclick="saveAdminNotes()">Save Notes</button>
                </div>
            </div>

            <div
                style="padding: 20px 30px; border-top: 1px solid #f0f0f0; background: #fafafa; border-radius: 0 0 15px 15px; display: flex; justify-content: flex-end; gap: 15px;">
                <button onclick="deleteMessage()" class="btn-primary" style="background: var(--color-error);">
                    <i class="fas fa-trash"></i> Delete
                </button>
                <a id="replyEmailLink" href="#" class="btn-primary">
                    <i class="fas fa-reply"></i> Reply via Email
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/chatbot.js"></script>
    <script src="../js/admin.js"></script>

    <script>
        function toggleMobileSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            let overlay = document.querySelector('.sidebar-overlay');
            if (overlay) overlay.classList.toggle('active');
        }
    </script>
</body>

</html>